$(function(){function e(){var e=$("#newLaunchPanelAds .selected").index(),a=$("#newLaunchPanelAds .selected").parent().index();$("#newLaunchPanelAds .newLaunchAd").removeClass("selected"),0==a&&0==e?$("#newLaunchPanelAds .newLaunchPanelAdsContain:nth-child(1) .newLaunchAd:nth-child(2)").addClass("selected"):0==a&&1==e?$("#newLaunchPanelAds .newLaunchPanelAdsContain:nth-child(2) .newLaunchAd:nth-child(1)").addClass("selected"):1==a&&0==e?$("#newLaunchPanelAds .newLaunchPanelAdsContain:nth-child(2) .newLaunchAd:nth-child(2)").addClass("selected"):1==a&&1==e&&$("#newLaunchPanelAds .newLaunchPanelAdsContain:nth-child(1) .newLaunchAd:nth-child(1)").addClass("selected")}function a(e){var a="sale-select-price-max",l="",r="No Min",n=T?"#mainSearchTabPane ":"#commercialSearchTabPane ";"left"==e?($(n+".price-range-div .select-list").removeClass("max"),a="sale-select-price-min",l=$(n+".sale-select-price-max").val(),r="No Min"):($(n+".price-range-div .select-list").addClass("max"),l=$(n+".sale-select-price-min").val(),r="No Max"),"S"==S?$(n+".sale-select-price .select-price-no-min-max").text(r):$(n+".rent-select-price .select-price-no-min-max").text(r),$(n+".price-range-div .select-list li").removeClass("selected"),t($("."+a).val(),l,e)}function t(e,a,t){e=r(e);var l=0,n=T?"#mainSearchTabPane ":"#commercialSearchTabPane ";0!=a&&(l=parseInt(r(a))),$(n+".price-range-div .select-list li").removeClass("disabled"),$(n+".price-range-div .select-list li").each(function(){var r=parseInt($(this).attr("value"));"left"==t?r>l&&0!=a&&$(this).addClass("disabled"):"right"==t&&r<l&&$(this).addClass("disabled"),$(this).attr("value")==e&&$(this).addClass("selected")})}function l(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function r(e){if(void 0!==e)return e.replace(/,/g,"")}function n(){return $(".search-select-bathroom").val().length?$(".search-select-bathroom").val().substring(0,1):""}function s(e){}function i(e){$(e+" input[type=checkbox]:checked").length>0?$("#advancedSearchLandmarkApply").text("Apply").addClass("landmarkApplySubmit"):$("#advancedSearchLandmarkApply").text("Close").removeClass("landmarkApplySubmit")}function c(){$(".landmarkMrtSection").each(function(e){Ie[$(this).attr("id")]=$(this).position().top})}function o(e,a){"right"==a?(e.closest(".select-drop-down").find(".select-drop-left").hide(),e.closest(".select-drop-down").find(".select-drop-right").show(),e.closest(".select-drop-down").find(".minmax-left").removeClass("minmax-left").addClass("minmax-right").text("No Max")):(e.closest(".select-drop-down").find(".select-drop-left").show(),e.closest(".select-drop-down").find(".select-drop-right").hide(),e.closest(".select-drop-down").find(".minmax-right").removeClass("minmax-right").addClass("minmax-left").text("No Min"))}function d(e,a,t){$(".select-drop-options-entry li").removeAttr("class");var l=0;l="left"==t?parseInt(e.closest(".select-drop-down").find(".rightValue").val()):parseInt(e.closest(".select-drop-down").find(".leftValue").val()),e.closest(".select-drop-down").find(".select-drop-"+t+" .select-drop-options-entry li").each(function(){var e=parseInt($(this).attr("value"));e==a&&$(this).addClass("selected"),0!=l&&("left"==t?e>=l&&$(this).addClass("disabled"):e<=l&&$(this).addClass("disabled"))})}function h(e,a){var t=e.closest(".select-select-div").prev(),l="",r=e.closest(".select-drop-down").attr("data-type"),n="noMinMax"!=e.attr("value")?"sqm"==r?e.attr("value")+" "+r:r+e.attr("value"):"noMinMax";n="left"==a?"noMinMax"==n?""!=(l=e.closest(".select-drop-down").find(".leftValue").val())?"Min "+(l="sqm"==r?l+" "+r:r+l):"Any":""!=(l=e.closest(".select-drop-down").find(".rightValue").val())?n+" - "+(l="sqm"==r?l+" "+r:r+l):"Min "+n:"noMinMax"==n?""!=(l=e.closest(".select-drop-down").find(".rightValue").val())?"Max "+(l="sqm"==r?l+" "+r:r+l):"Any":""!=(l=e.closest(".select-drop-down").find(".leftValue").val())?(l="sqm"==r?l+" "+r:r+l)+" - "+n:"Max "+n,t.find(".input-sublabel").text(n)}function p(){$(".searchTextRecent").is(":visible")?$(".searchTextRecent").hide():$(".searchTextRecent").show()}function m(e){return!isNaN(e)&&function(e){return(0|e)===e}(parseFloat(e))}var u,v=0,f=0,y="",g={latitude:1.3480752,longitude:103.8400135},k=!1,x=$('input[name="advancedPropertyTypeInput"]'),S=$(".saleRentTypeSelect").val(),T=!0,b=!0,C=!1,w=0,P=!1,M="",V=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{rateLimitBy:"throttle",rateLimitWait:90,cache:!1,url:"/common/autolocation.suggestions?query=%QUERY&source=listingSearch",filter:function(e){return M="",$.map(e.entries,function(e){return{value:e.displayText,id:e.id,type:e.type,propertyType:e.propertyType}})}}});V.initialize(),$("#searchTextbox").typeahead({hint:!1,highlight:!0,minLength:1},{name:"suggestions",source:V.ttAdapter(),display:"value",autoselect:!0,templates:{suggestion:function(e){var a=e.type,t=e.type,l=a,r="";e.propertyType;"HDB_ESTATE"==a?(l="AREAS",t=a="HDB","",r='<span class="typeahead-header-icons typeahead-hdb"></span>'):"DISTRICT"==a?(l="DISTRICTS","",r='<span class="typeahead-header-icons typeahead-district"></span>'):"MRT"==a||"LRT"==a?(l="MRT/LRT",r='<span class="typeahead-header-icons typeahead-mrt"></span>'):"STREET"==a?(l="Street",r='<span class="typeahead-header-icons typeahead-postal"></span>'):"CONDO"==a?(l="CONDO",r='<span class="typeahead-header-icons typeahead-condo"></span>'):"COMMERCIAL"==a?(l="COMMERCIAL",r='<span class="typeahead-header-icons typeahead-commercial"></span>'):"BUILDING"==a?r='<span class="typeahead-header-icons typeahead-building"></span>':"POSTAL"==a&&(r='<span class="typeahead-header-icons typeahead-postal"></span>');var n="";return M!=l&&(n+='<div class="typeahead-container-datatype"><div class="typeahead-container-datatype-text">'+l+"</div></div>"),n+='<div class="typeahead-container">',n+=t?'<div class="typeahead-container-data">'+r+e.value+"</div>":'<div class="typeahead-container-data typeahead-container-data-extended">'+e.value+"</div>",n+="</div>",M=l,n}}}).on("keyup",function(e){var a=e.keyCode||e.which;if($(".searchTextRecent").hide(),40==a||38==a){0!=$(".tt-dropdown-menu").find(".tt-suggestion.tt-cursor").index()?$(".tt-suggestion:first-child .typeahead-container").css({color:"#000","background-color":"#FFF"}):$(".tt-suggestion:first-child .typeahead-container").css({color:"#FFF","background-color":"#1ba8ec",cursor:"pointer"})}40!==a&&38!==a&&$(".tt-suggestion:first-child").addClass("tt-cursor")}),x.change(function(){console.log("Property Type Change");var e=$('input[name="advancedPropertyTypeInput"]:checked').val();$(".propertyTypeModelSubsection").hide(),$(".propertyTypeModelInput").prop("checked",!1),"81"==e?$(".propertyTypeModelSubsection.hdb").show():"85"==e?$(".propertyTypeModelSubsection.landed").show():"82"==e?$(".propertyTypeModelSubsection.commercial").show():"86"==e?$(".propertyTypeModelSubsection.condo").show():($(".propertyTypeModelSubsection.hdb").hide(),$(".propertyTypeModelSubsection.landed").hide(),$(".propertyTypeModelSubsection.commercial").hide(),$(".propertyTypeModelSubsection.condo").hide())}),$("input[name=advancedPropertySubtypeInput]").click(function(){var e=$(this).val(),a=!1,t=!1,l=!1,r=$(this).closest(".advancedPropertyTypeSubsection").find("input[name=advancedPropertySubtypeInput]:checked");"6"!=e&&"7"!=e||($(".propertyTypeModelSubsection label.apt-type").hide(),$(".propertyTypeModelSubsection label.condo-type").hide()),"16"!=e&&"17"!=e&&"1"!=e&&"2"!=e&&"3"!=e&&"4"!=e&&"18"!=e&&"19"!=e||(a=!0,$(".propertyTypeModelSubsection.hdb label").hide()),"5"!=e&&"8"!=e&&"10"!=e||(t=!0,$(".propertyTypeModelSubsection.landed label").hide()),"11"!=e&&"12"!=e&&"13"!=e&&"14"!=e&&"15"!=e&&"20"!=e&&"21"!=e||(l=!0,$(".propertyTypeModelSubsection.commercial label").hide()),r.each(function(){"6"==$(this).val()&&$(".condo-type").show(),"7"==$(this).val()&&$(".apt-type").show(),a&&("16"==$(this).val()&&$(".hdb-1-rm").show(),"17"==$(this).val()&&$(".hdb-2-rm").show(),"1"==$(this).val()&&$(".hdb-3-rm").show(),"2"==$(this).val()&&$(".hdb-4-rm").show(),"3"==$(this).val()&&$(".hdb-5-rm").show(),"4"==$(this).val()&&$(".hdb-exec").show(),"18"==$(this).val()&&$(".hdb-exec").show(),"19"==$(this).val()&&$(".hdb-jumbo").show()),t&&("5"==$(this).val()&&$(".terrace").show(),"8"==$(this).val()&&$(".semi-d").show(),"10"==$(this).val()&&$(".detached").show()),l&&("11"==$(this).val()&&$(".office").show(),"12"==$(this).val()&&$(".retail").show(),"13"==$(this).val()&&$(".shop").show(),"14"==$(this).val()&&$(".warehouse").show(),"15"==$(this).val()&&$(".factory").show(),"20"==$(this).val()&&$(".hdb-shop").show(),"21"==$(this).val()&&$(".land").show())})}),$("#searchTextbox").bind("typeahead:cursorchanged .typeahead",function(){var e=$("#searchTextbox").typeahead("val");$("#searchTextbox").val(e)}),$("#searchTextbox").on("typeahead:selected",function(e,a,t){var l="";if(w=0,k=!1,null!=a.id&&0!=a.id&&(l=a.id),"HDB_ESTATE"==a.type||"DISTRICT"==a.type){w=1;"HDB_ESTATE"==a.type?(f=l,v=0,$("input[name=landmarkTownValue][value="+l+"]"),w=5,k=!0):(v=l,f=0,$("input[name=landmarkDistrictValue][value="+l+"]"),k=!1),$("#searchTextbox").typeahead("val",a.value),b=!0}else v=0,f=0,y="";$(".landmarkDistrictSectionContent").each(function(){var e=$(this).find("input[name=landmarkDistrictValue]");e.each(function(){e.prop("checked",!1)})}),$(".landmarkTownSection").each(function(){var e=$(this).find("input[name=landmarkTownValue]");e.each(function(){e.prop("checked",!1)})}),$(".landmarkMrtSectionContent").each(function(){var e=$(this).find("input[name=landmarkMrtValue]");e.each(function(){e.prop("checked",!1)})}),$(".landmarkSchoolsContainer").each(function(){var e=$(this).find("input[name=landmarkSchoolValue]");e.each(function(){e.prop("checked",!1)})}),$(".landmarkLifestylesContainer").each(function(){var e=$(this).find("input[name=landmarkLifestyleValue]");e.each(function(){e.prop("checked",!1)})}),P="HDB"==a.propertyType,$(".tt-dropdown-menu").hide()});var L=!1;$("#commercialSearchTypeahead").on("keydown",function(e){});new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{rateLimitBy:"throttle",rateLimitWait:90,url:"/common/autolocation.suggestions?query=%QUERY",filter:function(e){return $.map(e.suggestions,function(e){return{value:e}})}}}).initialize(),$("#commercialSearchTypeahead").typeahead(null,{name:"suggestions",source:V.ttAdapter()}).on("keyup",function(e){var a=e.keyCode||e.which;if($("#commercialSearchTextRecent").hide(),40==a||38==a){0!=$(".tt-dropdown-menu").find(".tt-suggestion.tt-cursor").index()?$(".tt-suggestion:first-child").css({color:"#000","background-color":"#FFF"}):$(".tt-suggestion:first-child").css({color:"#FFF","background-color":"#1ba8ec"})}40!==a&&38!==a&&$(".tt-suggestion:first-child").addClass("tt-cursor")}),$("#commercialSearchTypeahead").bind("typeahead:cursorchanged .typeahead",function(){var e=$("#commercialSearchTypeahead").typeahead("val");$("#commercialSearchTypeahead").val(e)}),$("#commercialSearchTypeahead").on("typeahead:selected",function(e,a,t){var l="";null!=a.id&&0!=a.id&&(l=a.id),"HDB_ESTATE"==a.type||"DISTRICT"==a.type?(w=1,"HDB_ESTATE"==a.type?(f=l,$input=$("input[name=landmarkTownValue][value="+l+"]"),w=5):(v=l,$input=$("input[name=landmarkDistrictValue][value="+l+"]")),$("#searchTextbox").typeahead("val",a.value),b=!1):(v=0,f=0,y=""),P="HDB"==a.propertyType,$(".tt-dropdown-menu").hide()}),$(".searchBarMinPrice a").click(function(e){$(this).hasClass("open")?($(this).parent().find(".searchBarFloatingBox").hide(),$(this).removeClass("open")):($(this).parent().find(".searchBarFloatingBox").show(),$(this).addClass("open")),$(".searchBarMaxPrice a").removeClass("open"),$(".searchBarMaxPrice .searchBarFloatingBox").hide(),e.preventDefault()}),$(".searchBarMaxPrice a").click(function(e){$(this).hasClass("open")?($(this).parent().find(".searchBarFloatingBox").hide(),$(this).removeClass("open")):($(this).parent().find(".searchBarFloatingBox").show(),$(this).addClass("open")),$(".searchBarMinPrice a").removeClass("open"),$(".searchBarMinPrice .searchBarFloatingBox").hide(),e.preventDefault()}),$(".searchBarFloatingBox ul li").click(function(){var e=$(this).attr("value"),a=$(this).text();$(this).closest(".searchBarPriceContainer").find(".searchBarFloatingBox").hide(),$(this).closest(".searchBarPriceContainer").find("a").removeClass("open"),$(this).closest(".searchBarPriceContainer").find("input[type=hidden]").val(e),$(this).closest(".searchBarPriceContainer").find("a span.textLabel").text(a)});var D={Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPod/i.test(navigator.userAgent)},iOSPad:function(){return/iPad/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return D.Android()||D.BlackBerry()||D.iOS()||D.Windows()}},I=0,A=new Array,B=["https://s3-ap-southeast-1.amazonaws.com/static.streetsine/HomePageBg/rwd/background_4.jpg","https://s3-ap-southeast-1.amazonaws.com/static.streetsine/HomePageBg/rwd/background_7.jpg","https://s3-ap-southeast-1.amazonaws.com/static.streetsine/HomePageBg/rwd/background_8.jpg","https://s3-ap-southeast-1.amazonaws.com/static.streetsine/HomePageBg/rwd/background_9.jpg","https://s3-ap-southeast-1.amazonaws.com/static.streetsine/HomePageBg/rwd/background_10.jpg"],R=$("#srxMainSearchRow");R&&R.length&&enquire.register("screen and (min-width:1200px)",{match:function(){if(0==A.length)for(var e=0;e<B.length;e++)A[e]=new Image,A[e].src=B[e];var a=0;R.css("background-image","url("+B[0]+")"),I=setInterval(function(){++a>B.length-1&&(a=0);var e=A[a];R.css("background-image","url("+e.src+")")},8e3)},unmatch:function(){clearInterval(I)}}),$(".burgerWrapper").click(function(e){p(),e.preventDefault()});window.location.href;$("#searchTextbox, #commercialSearchTypeahead").focus(function(){p()}),$("#advancedPropertyTypeFinal").click(function(e){$(".propertyTypeModelPanel").slideUp(),e.stopPropagation(),$("#advancedPropertyTypePanel").is(":visible")?$("#advancedPropertyTypePanel").slideUp():$("#advancedPropertyTypePanel").slideDown(),$("#advancedPropertyTypePanelConfirm").click(function(e){e.preventDefault(),$("#advancedPropertyTypePanel").slideUp()})}),$(document).click(function(e){var a=e.target;$(a).is(".advancedPropertyTypeSection")||$(a).parents().is(".advancedPropertyTypeSection")||$("#advancedPropertyTypePanel").hide(),$(a).is(".search-more-model-div")||$(a).parents().is(".propertyTypeModelInput")||$(a).parents().is(".show-more-model-div")||$(".show-more-model-div").hide()});var z=$("#cleanQueryString").val();if(void 0!==z){var W=z.split("&");if(W.length>0&&""!=W[0])for(var F=0;F<W.length;F++){var O=W[F].split("="),E=O[0],N=O[1].split(","),U=0;"selectedDistrictIds"==E?U=1:"selectedAmenitiesIds"==E?U=2:"selectedHdbTownIds"==E&&(U=3,k=!0);for(var H=0;H<N.length;H++)1==U?$("#landmarkDistrict input[value="+N[H]+"]").prop("checked",!0):2==U?($("#landmarkMrt input[value="+N[H]+"]").prop("checked",!0),$("#landmarkSchool input[value="+N[H]+"]").prop("checked",!0),$("#landmarkLifestyle input[value="+N[H]+"]").prop("checked",!0)):3==U&&$("#landmarkTown input[value="+N[H]+"]").prop("checked",!0)}}$("#advancedSearchLandmarkDone").click(function(e){Custombox.close("advancedSearchLandmark")}),$("#srxMainSearchConsole ul.nav li").click(function(){$("#srxMainSearchConsole ul.nav li").removeClass("active"),$(this).addClass("active"),$(".searchTextRecent").hide(),T="C"!=$(this).attr("data-type"),"X"==$(this).attr("data-type")?$("#searchBarXValueLogo").show():$("#searchBarXValueLogo").hide(),"X"==$(this).attr("data-type")&&setTimeout("$('input[name=xValueTypeahead]').focus();",250)}),$("#srxMainSearchConsole ul.nav a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(".saleRentTypeSelect").change(function(){S=$(this).val();var e="#mainSearchTabPane";T||(e="#commercialSearchTabPane");var t=!1;$(".sale-select-price-min").is("input")&&($(".sale-select-price-min").val(""),$(".sale-select-price-max").val(""),t=!0),$(".searchBarMinPrice a .textLabel").text("Min Price"),$(".searchBarMaxPrice a .textLabel").text("Max Price"),"S"==S?($(e+" .sale-select-price").removeClass("max"),$(e+" .sale-select-price li").removeClass("disabled"),a("left"),$(e+" .rent-select-price").removeClass("show").addClass("hide"),$(e+" .sale-select-price").removeClass("hide").addClass("show"),$(e+" .roomRentalFilter").removeClass("show").addClass("hide"),$(e+" .select-drop-sale").removeClass("hide").addClass("show"),$(e+" .select-drop-rent").removeClass("show").addClass("hide"),t||($(e+" .rent-select-price-min").removeClass("show").addClass("hide"),$(e+" .rent-select-price-max").removeClass("show").addClass("hide"),$(e+" .sale-select-price-min").removeClass("hide").addClass("show"),$(e+" .sale-select-price-max").removeClass("hide").addClass("show"))):($(e+" .rent-select-price").removeClass("max"),$(e+" .rent-select-price li").removeClass("disabled"),a("left"),$(e+" .rent-select-price").removeClass("hide").addClass("show"),$(e+" .sale-select-price").removeClass("show").addClass("hide"),$(e+" .roomRentalFilter").removeClass("hide").addClass("show"),$(e+" .select-drop-sale").removeClass("show").addClass("hide"),$(e+" .select-drop-rent").removeClass("hide").addClass("show"),t||($(e+" .rent-select-price-min").addClass("show").removeClass("hide"),$(e+" .rent-select-price-max").addClass("show").removeClass("hide"),$(e+" .sale-select-price-min").addClass("hide").removeClass("show"),$(e+" .sale-select-price-max").addClass("hide").removeClass("show"))),$(e+" .priceWrapperAnyPrice").show(),$(e+" .priceWrapperAnyMinMax").hide().text("Any Price")}),$(".saleRentTypeSlider, .commercialSaleRentTypeSlider").click(function(){if(!$(this).hasClass("selected")){var e="#mainSearchTabPane";T||(e="#commercialSearchTabPane"),$(e+" .saleRentTypeSlider").removeClass("selected"),$(this).addClass("selected"),$(e+" .search-more-psf-div").find(".input-sublabel").text("Any"),$(e+" .show-more-psf-div").find(".leftValue").val(""),$(e+" .show-more-psf-div").find(".rightValue").val(""),0==$(this).index()?(T?$("#saleRentTypeSelect").val("S").change():$("#commercialTypeSelect").val("S").change(),$(e+" .rent-select-price").removeClass("show").addClass("hide"),$(e+" .sale-select-price").removeClass("hide").addClass("show"),$(e+" .roomRentalFilter").removeClass("show").addClass("hide"),$(e+" .select-drop-sale").removeClass("hide").addClass("show"),$(e+" .select-drop-rent").removeClass("show").addClass("hide")):(T?$("#saleRentTypeSelect").val("R").change():$("#commercialTypeSelect").val("R").change(),$(e+" .rent-select-price").removeClass("hide").addClass("show"),$(e+" .sale-select-price").removeClass("show").addClass("hide"),$(e+" .roomRentalFilter").removeClass("hide").addClass("show"),$(e+" .select-drop-sale").removeClass("show").addClass("hide"),$(e+" .select-drop-rent").removeClass("hide").addClass("show")),$(e+" .sale-select-price-min").val(""),$(e+" .sale-select-price-max").val("")}}),$(".advancedPropertyTypeFinal").click(function(e){$(".advancedPropertyTypePanel").hasClass("show")?($(".advancedPropertyTypePanel").removeClass("show"),$(".advancedPropertyTypeFinal").removeClass("drop-up").addClass("drop-down")):($(".advancedPropertyTypePanel").addClass("show"),$(".advancedPropertyTypeFinal").removeClass("drop-down").addClass("drop-up")),$(".advancedPropertyTypePanelConfirm").click(function(e){e.preventDefault(),$(".advancedPropertyTypePanel").removeClass("show"),$(".advancedPropertyTypeFinal").removeClass("drop-up").addClass("drop-down")})}),$(".saleRentTypeSliderWrapper .form-control").click(function(e){$(".saleRentTypeSliderWrapper .drop").hasClass("drop-down")?$(".saleRentTypeSliderWrapper .drop").removeClass("drop-down").addClass("drop-up"):$(".saleRentTypeSliderWrapper .drop").removeClass("drop-up").addClass("drop-down")});var j=function(e){var a=$('input[name="advancedPropertyTypeInput"]:checked').val();if(e&&($('input[name="advancedPropertySubtypeInput"]').prop("checked",!1),$('input[name="propertyTypeModelDropdown"]').prop("checked",!1)),$(".advancedPropertyTypeSubsection").slideUp(),"83"!=a){$('input[name="advancedPropertyTypeInput"]:checked').closest(".advancedPropertyTypeSection").find(".advancedPropertyTypeSubsection").slideDown()}"83"==a?($(".advancedPropertyTypePanel").removeClass("show"),$(".advancedPropertyTypeFinal").removeClass("drop-up").addClass("drop-down"),$(".search-more-model-div").hide()):$(".search-more-model-div").show(),"81"==a?($("#hdbTownSelect").show(),$("#locationSelect").hide(),$(".search-more-hdb-blocks-div").show(),w=5):"86"==a?w=1:($("#hdbTownSelect").hide(),$("#locationSelect").show(),$(".searchTextAmenitiesDistrictTown").text("Choose District").removeClass("isHdb"),$(".search-more-hdb-blocks-div").hide(),"85"==a?$(".search-more-land-size-div").addClass("show").removeClass("hide"):$(".search-more-land-size-div").addClass("hide").removeClass("show"));if($("#propertyTypeDropdownWrapper").is(":visible"))$("#propertyTypeDropdownWrapper .advancedPropertyTypePlaceholder").find("option").html($('input[name="advancedPropertyTypeInput"]:checked').closest("label").text()).attr("selected","selected");else{var t=$('input[name="advancedPropertyTypeInput"]:checked').closest("label").text(),l=$(window).width();l>=768&&l<=1440?t.length>7&&(t=t.substring(0,7)+"..."):l>425&&(t.length>11?t="Commercial / Industrial"==t?t.substring(0,9)+"...":t.substring(0,11)+"...":"Condominium"==t&&(t=t.substring(0,8)+"...")),$("#advancedPropertyTypeFinalText").text(t),$("#advancedPropertyType").text(t),$("#propertyTypeDropdownWrapper .advancedPropertyTypePlaceholder").find("option").html($('input[name="advancedPropertyTypeInput"]:checked').closest("label").text()).attr("selected","selected")}};j(!1),$('input[name="advancedPropertyTypeInput"]').change(function(){j(!0)});var X=function(e){};$(document).ready(function(){enquire.register("screen and (min-device-width:768px) and (max-device-width:1024px)",{match:function(){X(),C=!0},unmatch:function(){X()}})}),$(".xValueSaleRentTypeSlider").click(function(){$(this).hasClass("selected")||($(".xValueSaleRentTypeSlider").removeClass("selected"),$(this).addClass("selected"),0==$(this).index()?$("#xValueTypeSelect").val("S").change():$("#xValueTypeSelect").val("R").change())});var q={placement:"top",container:"body",html:!0,selector:'[rel="popover"]',trigger:"hover click",content:function(){return"<p>The suggested size is an estimate, please verify before proceeding.</p>"}};$("body").popover(q);var Y=navigator.userAgent.match(/iPad/i)?"touchstart":"click";$(document).on(Y,"#xValueSizeTag",function(){$(this).popover(q).popover("show")});var _=function(){$("#xValueSizeInputID").popover("destroy").popover(le).popover("show"),setTimeout(function(){$("#xValueSizeInputID").popover("hide").popover("destroy").popover(te)},3e3)},G=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"/common/sveMobile.agent?limit=5&action=searchWithWalkup&query=%QUERY",rateLimitBy:"throttle",rateLimitWait:90,filter:function(e){return $.map(e.data,function(e,a){return{key:e.postalCode,value:e.address,data:e}})}}});G.initialize(),$('#xValueTabPane [name="xValueTypeahead"]').typeahead(null,{name:"xValueSuggestions",source:G.ttAdapter(),autoselect:!0}).on("keyup",function(e){var a=e.keyCode||e.which;if(40==a||38==a){0!=$("#xValueTabPane .tt-dropdown-menu").find(".tt-suggestion.tt-cursor").index()?$("#xValueTabPane .tt-suggestion:first-child").css({color:"#000","background-color":"#FFF"}):$("#xValueTabPane .tt-suggestion:first-child").css({color:"#FFF","background-color":"#1ba8ec"})}40!==a&&38!==a&&$("#xValueTabPane .tt-suggestion:first-child").addClass("tt-cursor")}),$("input[name=xValueTypeahead]").on("keydown",function(e){40==e.keyCode&&(L=!0),13!=e.which||L||$(".tt-suggestion:first-child").click()}),$('#xValueTabPane [name="xValueTypeahead"]').on("typeahead:selected",function(e,a,t){$(".tt-dropdown-menu").hide(),K=a,Q(a.key,Z,a.data.buildingNum)}),$("#xValueTabPane > form").submit(function(e){e.preventDefault(),pe()});var J,K="",Q=function(e,a,t){J=t,$.ajax("/srx/listing/getAddressByPostalCode/redefinedSearch.srx",{type:"POST",cache:!1,dataType:"json",data:{skipCommercial:"Y",postalCode:e,buildingNum:t},success:function(e){var t=e.data.propertySubType,l=e.data.propertyType,r=e.data.typeOfArea,n=e.data.possiblyNoUnit,s=e.data.propertySubTypeList;a(t,l,r,n,s)}})},Z=function(e,a,t,l,r){$('#xValueTabPane [name="xValueSize"]').val(""),$('#xValueTabPane [name="xValueFloorNo"]').val(""),$('#xValueTabPane [name="xValueUnitNo"]').val(""),$('#xValueTabPane [name="xValueGfa"]').val("0"),ce=!1,$("#xValuePossiblyNoUnit").val(l);var n=$('#xValueTabPane [name="xValuePropertyType"]'),s="Y"==$("#landedXValue").val()&&("5"==e||"8"==e||"10"==e);if("LAND"==t?he("L"):"STRATA"==t&&he("S"),s?($("#landedXValueContainer").show(),$("#xValueUnitLabel").html("Unit (Optional)"),D.any()&&($("#landedXValueContainer .xValueInputButton").show(),$(".xValueTypesWrapper .xValueInputButton").hide()),$("#calculateLanded").length>0&&($("#calculateLanded").show(),$("#calculateNonLanded").hide())):($("#landedXValueContainer").hide(),$("#xValueUnitLabel").html("Unit"),$("#calculateLanded").length>0&&($("#calculateLanded").hide(),$("#calculateNonLanded").show()),D.any()&&($("#landedXValueContainer .xValueInputButton").hide(),$(".xValueTypesWrapper .xValueInputButton").show())),1!=a&&r.length>1){for(var i="",c=0;c<r.length;c++)6==r[c]?i+="<option value='6'>Condominium</option>":7==r[c]?i+="<option value='7'>Apartment</option>":5==r[c]?i+="<option value='5'>Terrace</option>":8==r[c]?i+="<option value='8'>Semi-Detached</option>":10==r[c]&&(i+="<option value='10'>Detached</option>");(r.indexOf(5)>-1||r.indexOf(8)>-1||r.indexOf(10)>-1)&&ee(),""!=i&&n.html(i)}else{if("6"==e)n.html("<option value='6'>Condominium</option>");else if("7"==e)n.html("<option value='7'>Apartment</option>");else if(s)"5"==e?n.html("<option value='5' selected='selected'>Terrace</option><option value='8'>Semi-Detached</option><option value='10'>Detached</option>"):"8"==e?n.html("<option value='5'>Terrace</option><option value='8' selected='selected'>Semi-Detached</option><option value='10'>Detached</option>"):"10"==e&&n.html("<option value='5'>Terrace</option><option value='8'>Semi-Detached</option><option value='10' selected='selected'>Detached</option>"),n.val(e),ee();else if(1==a||"17"==e||"1"==e||"2"==e||"3"==e||"4"==e)n.html("<option value='0' selected>Select</option><option value='1'>HDB 3 Room</option><option value='2'>HDB 4 Room</option><option value='3'>HDB 5 Room</option><option value='4'>HDB Executive</option>");else{var o='<option value="0" selected>Select</option><option value="6">Condominium</option><option value="1">HDB 3 Room</option><option value="2">HDB 4 Room</option><option value="3">HDB 5 Room</option><option value="4">HDB Executive</option>';"Y"==$("#landedXValue").val()&&(o+='<option value="5">Terrace</option><option value="8">Semi-D</option><option value="10">Detached</option>'),o+='<option value="purchase">Commercial</option><option value="purchase">Industrial</option>',n.html(o)}n.val(e)}de()},ee=function(){var e=$('#xValueTabPane [name="xValueFloorNo"]').val(),a=$('#xValueTabPane [name="xValueUnitNo"]').val(),t=$('#xValueTabPane [name="xValuePropertyType"]').val(),l="Y"==$("#landedXValue").val()&&("5"==t||"8"==t||"10"==t),r="true"==$("#xValuePossiblyNoUnit").val();K&&t&&(l||e&&a||r)?function(e,a,t,l,r){$.ajax("/common/sveMobile.agent",{type:"POST",dataType:"json",data:{action:"getProject",postal:e,floor:l,unit:t,type:a,userId:1,buildingNum:J,typeOfArea:$('#xValueTabPane [name="xValueTypeOfArea"]').val()},success:function(e){if(e.data[0]){var a=e.data[0];r(a)}}})}(K.key,t,a,e,oe):K&&$("#xValueSizeInputID").popover("destroy").popover(te).popover("show")},ae=!1;$('#xValueTabPane [name="xValueSize"]').focus(function(){""==$('#xValueTabPane [name="xValueSize"]').val()?ee():($("#xValueSizeInputID").popover("hide"),ae||(_(),ae=!0))}),$("#xValueGetSizeButton").click(function(){ce=!1,ee()}),$("#xValueSizeInputID").keypress(function(){$("#xValueSizeInputID").popover("hide")});var te={placement:"bottom",html:!0,selector:"#xValueSizeInputID",trigger:"focus",delay:{hide:3e3},template:'<div class="popover fade bottom in showXValueGetSizeMsg" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return"<p style='color: #333; margin-bottom: 0px;'>We are unable to default the size without the other information. Please enter all the other fields.</p>"}},le={placement:"top",html:!0,selector:"#xValueSizeInputID",trigger:"manual",template:'<div class="popover fade bottom in showXValueGetSizeMsg" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return"<p style='color: #333; margin-bottom: 0px;'>The suggested size is an estimate, please verify before proceeding.</p>"}};$("#xValueSizeInputID").popover(te);var re,ne,se,ie,ce=!1,oe=function(e){if(e){var a=e.size;re=e.streetId,J||(J=e.block),ne=e.building||e.street,se=e.tenure,ie=e.typeOfArea,"L"!=$('#xValueTabPane [name="xValueTypeOfArea"]').val()&&($("#xValueSizeTag").html("Size <span class='glyphicon glyphicon-info-sign'></span>"),$("#xValueGfaDiv").hide());var t=$('#xValueTabPane [name="xValuePropertyType"]').val(),l="Y"==$("#landedXValue").val()&&("5"==t||"8"==t||"10"==t);if("LAND"==ie?he("L",e.gfa):"STRATA"==ie&&he("S",e.gfa),"LEASE"==se?$('#xValueTabPane [name="xValueTenure"]').val(2):"FREE"==se?$('#xValueTabPane [name="xValueTenure"]').val(1):$('#xValueTabPane [name="xValueTenure"]').val(0),e.lastConstructed){var r=new Date(e.lastConstructed).getFullYear();$("#xValueBuiltYear").val(r)}var n=e.pesSize;n>0&&($('#xValueTabPane [name="xValuePES"]').val(n),$("#xValuePESWrapperArea").is(":visible")&&fe()),l&&0!=e.gfa&&$('#xValueTabPane [name="xValueGfa"]').val(e.gfa)}t=$('#xValueTabPane [name="xValuePropertyType"]').val();a?($("#xValueSizeInputID").popover("hide"),$('#xValueTabPane [name="xValueSize"]').val(e.size),_()):(ce||alert("We are unable to default the size because we do not have that information. Please key in the size if you know. Otherwise, contact customerservice@srx.com.sg"),ce=!0)},de=function(e){var a="sqft",t=$('#xValueTabPane [name="xValuePropertyType"]').val();if("purchase"==t)return $(".xvalue-only-ui,#landedXValueContainer,#calculateLanded").hide(),void $(".valuation-driver").show();$(".valuation-driver").hide(),$(".xvalue-only-ui").show(),"17"!=t&&"1"!=t&&"2"!=t&&"3"!=t&&"4"!=t||(a="sqm"),$("#xValueMeasureText").html(a);"Y"==$("#landedXValue").val()&&("5"==t||"8"==t||"10"==t)?($("#landedXValueContainer").show(),$("#xValueUnitLabel").html("Unit (Optional)"),D.any()&&($("#landedXValueContainer .xValueInputButton").show(),$(".xValueTypesWrapper .xValueInputButton").hide())):($("#landedXValueContainer").hide(),$("#xValueUnitLabel").html("Unit"),D.any()&&($("#landedXValueContainer .xValueInputButton").hide(),$(".xValueTypesWrapper .xValueInputButton").show()));var l=$('#xValueTabPane [name="xValueTypeOfArea"]').val();he(l)};$('#xValueTabPane [name="xValuePropertyType"]').change(de);var he=function(e,a){var t=$('#xValueTabPane [name="xValuePropertyType"]').val();$('#xValueTabPane [name="xValueTypeOfArea"]').val(e);"Y"==$("#landedXValue").val()&&("5"==t||"8"==t||"10"==t)?"L"==e?($("#xValueSizeTag").html("Land Size <span class='glyphicon glyphicon-info-sign'></span>"),$("#xValueGfaDiv").show(),a&&$('#xValueTabPane [name="xValueGfa"]').val(a)):"S"==e&&($("#xValueSizeTag").html("Built Size <span class='glyphicon glyphicon-info-sign'></span>"),$('#xValueTabPane [name="xValueSize"]').val(""),$("#xValueGfaDiv").hide()):$("#xValueSizeTag").html("Size <span class='glyphicon glyphicon-info-sign'></span>")};$('#xValueTabPane [name="xValueTypeOfArea"]').change(function(e){he($(this).val())});var pe=function(){var e=$('#xValueTabPane [name="xValueFloorNo"]').val(),a=$('#xValueTabPane [name="xValueUnitNo"]').val(),t=e+"-"+a,l=$("#xValueTypeSelect").val();if(e||(t=""),e.match(/[a-z]/i))return alert("Floor number can only be numbers."),void $('#xValueTabPane [name="xValueFloorNo"]').focus();for(var r=a.length,n=0,s=0;s<r;s++){a.charAt(s).match(/[a-z]/i)&&n++}if(n>1)return alert("Unit number can only contain one letter."),void $('#xValueTabPane [name="xValueUnitNo"]').focus();var i=$('#xValueTabPane [name="xValueSize"]').val(),c=$('#xValueTabPane [name="xValuePropertyType"]').val(),o=$("#landedXValue").val(),d="Y"==$("#landedXValue").val()&&(5==c||8==c||10==c),h="true"==$("#xValuePossiblyNoUnit").val(),p="",m=$('#xValueTabPane [name="xValueTenure"]').val(),v=$('#xValueTabPane [name="xValueTypeOfArea"]').val();if($("#xValuePESWrapperArea").is(":visible")&&(p=$('#xValueTabPane [name="xValuePES"]').val()),0==$("#xValueTabPane .tt-suggestions").length){if(""==K||0==c||""==a&&!d&&!h||""==i)return void alert("Please check your address, unit, property type and size to continue. Make sure you select from the dropdown as you type in the address.");var f,y="condo";17==c||1==c||2==c||3==c||4==c?(f=81,y="hdb"):6==c||7==c?f=86:5!=c&&8!=c&&10!=c||(f=85,y="landed");var g="sale";"R"==l&&(g="rent"),ne&&(ne=ne.replace(/(\s|\/)/g,"+").replace("#",""));var k=K.value.replace(/\s/g,"+"),x="/search/"+g+"/"+y+"/"+ne+"/xValuePricing?isPromotion=true&encryptedId="+re+"&buildingNum="+J+"&postalCode="+K.key+"&subType="+c+"&unit="+t+"&size="+i+"&externalArea="+p+"&propertyType="+f+"&type="+c+"&keywords="+k;if(d){if(!m||"0"==m||!v||"0"==v)return void alert("Tenure and Land Type are Required fields.");x+="&landedXValue="+o,h&&(x+="&possiblyNoUnit="+h);var S=$("#xValueBuiltYear").val();if(""==S)return void alert("Built year is required");S&&(x+="&builtYear="+S),v&&"0"!=v&&(x+="&landType="+v),m&&"0"!=m&&(x+="&tenure="+m);var T=$('#xValueTabPane [name="xValueGfa"]').val();T&&"0"!=T&&(x+="&builtSizeGfa="+T)}"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","SRX X-Value","Complete Address",k]),u=x,window.location.href=u}};$("#trackerModalLater").click(function(){window.location.href=u}),$("#trackerModalProceed").click(function(){var e=$('#xValueTabPane [name="xValueFloorNo"]').val(),a=$('#xValueTabPane [name="xValueUnitNo"]').val(),t=$("#xValueTypeSelect").val();e||(xValueUnit="");var l=$('#xValueTabPane [name="xValueSize"]').val(),r=$('#xValueTabPane [name="xValuePropertyType"]').val(),n=($("#landedXValue").val(),"Y"==$("#landedXValue").val()&&(5==r||8==r||10==r)),s="true"==$("#xValuePossiblyNoUnit").val(),i=$('#xValueTabPane [name="xValueTenure"]').val(),c=$('#xValueTabPane [name="xValueTypeOfArea"]').val(),o="";null!=$("#xValueTabPane #xValueBuiltYear").val()&&(o=$("#xValueTabPane #xValueBuiltYear").val());var d=K.key;sessionStorage.removeItem("xvalueUrl"),sessionStorage.setItem("xvalueUrl",u);var h="xvalue",p="",m="mysg-home-xvalue";$("#tracker-register-source").length>0&&("64"==$("#tracker-register-source").val()?(p="xvalue-town",m="mysg-home/toa-payoh",h="tpy"):"65"==$("#tracker-register-source").val()&&(p="xvalue-town",m="mysg-home/queenstown",h="qt")),window.location.href="/"+m+"?from="+h+"&fromTown="+p+"&streetId="+re+"&postalCode="+d+"&floor="+e+"&unit="+a+"&type="+t+"&size="+l+"&subType="+r+"&landedXValue="+n+"&possiblyNoUnit="+s+"&tenure="+i+"&landType="+c+"&builtYear="+o+"&buildingNum="+J}),$("#listings-main-tab-map").click(function(e){if(e.preventDefault(),$(".tt-suggestion").children().length>0)$(".tt-suggestion:first-child",this).trigger("click");else{var a=[],t="/maps?fromHome=1";Ue(a);for(var l=0;l<a.length;++l)t+="&"+a[l];window.location=t}});var me=function(){var e=$.trim($("#searchTextbox").val());""!=e&&($(".typeahead-container-data").length&&$(".typeahead-container-data").first().hasClass("typeahead-container-data-extended")&&(e=$(".typeahead-container-data").first().html()),e=(e=(e=e.replace(new RegExp("\\+","g"),"%2B")).replace(new RegExp(" ","g"),"+")).replace(new RegExp("/","g"),"+"));var a="R"==S?"rent":"sale",t=$('input[name="advancedPropertyTypeInput"]:checked').val();void 0==t&&(t=83);var l="";"C"==$("#srxMainSearchConsole li.active").attr("data-type")?l="commercial":6806==t||"N"==t?l="all-property-types":83==t?l="residential":81==t?l="hdb":86==t?l="condo":85==t?l="landed":82==t&&(l="commercial"),url="/search/"+a+"/"+l+"/";var n=[];if("83"!=t){var i=!0,c="";if($('input[name="advancedPropertySubtypeInput"]:checked').each(function(e){0!=e&&(c+=","),c+=$(this).val()}),""!=c){var o=!0;"16,17,1,2,3,4,18,19"!=c&&"6,7"!=c&&"5,8,10"!=c||(o=!1),o&&n.push("cdResearchSubTypes="+c),"5"==c&&(i=!1)}var d="",h="modelsNotRequired";$('input[name="advancedPropertySubtypeInput"][value="6,7"]').is(":checked")&&(d="propertyTypeModelCondoApt");var p=!1;($('input[name="advancedPropertySubtypeInput"][value=5]').is(":checked")||$('input[name="advancedPropertySubtypeInput"][value=8]').is(":checked")||$('input[name="advancedPropertySubtypeInput"][value=10]').is(":checked"))&&(d="propertyTypeModelLanded",$('input[name="advancedPropertySubtypeInput"][value=5]').is(":checked")&&$('input[name="advancedPropertySubtypeInput"][value=8]').is(":checked")&&$('input[name="advancedPropertySubtypeInput"][value=10]').is(":checked")||(p=!0));var u="";if(""==d||p){("86"==$('input[name="advancedPropertyTypeInput"]:checked').val()?$('.propertyTypeModelCondoApt input[name="propertyTypeModelDropdown"]:checked'):$('.propertyTypeModelLanded input[name="propertyTypeModelDropdown"]:checked')).each(function(e){0!=e&&(u+=","),$(this).is(":checked")&&(u+=$(this).val())}),h="models","85"==$("input[name=advancedPropertyTypeInput]:checked").val()&&(landedDesktopCheck=$('#advancedPropertyTypePanelMobile .propertyTypeModelLanded input[name="propertyTypeModelDropdown"][value="CLUSTER HOUSE"]:checked').val(),"propertyTypeModelLanded"!=d||landedDesktopCheck||(u="CLUSTER HOUSE",h="modelsNotRequired")),"models"==h&&(i=!0)}else{$("."+d+' input[name="propertyTypeModelDropdown"]').each(function(e){0!=e&&(u+=","),$(this).is(":checked")||(u+=$(this).val())})}var g="";if($(".propertyTypeModelInput").each(function(){g+=this.checked?$(this).val()+",":""}),g.length>0){var x=g.length-1;g=g.substring(0,x)}""!=u?(","==u.charAt(0)&&(u=u.substr(1)),","==u.charAt(u.length-1)&&(u=u.substr(0,u.length-1)),""!=u&&","!=u&&i&&("modelsNotRequired"!=h?(u+=","+g,n.push(h+"="+u)):(n.push(h+"="+u),n.push("models="+g)))):""!=g&&n.push("models="+g)}var T="sale"==a?"minSalePrice":"minRentPrice",b="sale"==a?"maxSalePrice":"maxRentPrice",C=!0;if($(".sale-select-price-min").is("input")&&(C=!1),""!=$("#mainSearchTabPane .sale-select-price-min").val()&&void 0!==$("#mainSearchTabPane .sale-select-price-min").val()){var w=r($("#mainSearchTabPane .sale-select-price-min").val());C&&"rent"==a&&(w=r($("#mainSearchTabPane .rent-select-price-min").val())),m(w=w.replace(/\D/g,""))&&n.push(T+"="+w)}if(""!=$("#mainSearchTabPane .sale-select-price-max").val()&&void 0!==$("#mainSearchTabPane .sale-select-price-max").val()){var P=r($("#mainSearchTabPane .sale-select-price-max").val());C&&"rent"==a&&(P=r($("#mainSearchTabPane .rent-select-price-max").val())),m(P=P.replace(/\D/g,""))&&n.push(b+"="+P)}if("rent"==a&&$("#search-select-roomRental").is(":checked")&&n.push("isRoomRental=true"),""!=$("#bedroomSelect").val()){var M=$("#bedroomSelect").val();void 0!==M&&(n.push("maxBedrooms="+M),n.push("minBedrooms="+M))}if(""!=$("#sizeSelectMin").val()){var V=$("#sizeSelectMin").val();if(void 0!==V)D=r(V);void 0!==D&&(D=D.replace(/\D/g,"")),m(D)&&n.push("minBuiltSize="+D)}if(""!=$("#sizeSelectMax").val()){var L=$("#sizeSelectMax").val();if(void 0!==L)var D=r(L);void 0!==D&&(D=D.replace(/\D/g,"")),m(D)&&n.push("maxBuiltSize="+D)}if(""!=$("#search-select-psf-min").val()){var I=$("#search-select-psf-min").val();if(void 0!==I)B=r(I);void 0!==B&&(B=B.replace(/\D/g,"")),m(B)&&n.push("minPSF="+B)}if(""!=$("#search-select-psf-max").val()){var A=$("#search-select-psf-max").val();if(void 0!==A)var B=r(A);void 0!==B&&(B=B.replace(/\D/g,"")),m(B)&&n.push("maxPSF="+B)}if(""!=$("#search-select-tenure").val()){var R=$("#search-select-tenure").val();void 0!==R&&n.push("tenure="+R)}if(""!=$("#search-select-furnish").val()){var z=$("#search-select-furnish").val();void 0!==z&&n.push("furnish="+z)}if(""!=$("#search-select-floor-level").val()){var W=$("#search-select-floor-level").val();void 0!==W&&n.push("floor="+W)}if(""!=$("#search-select-bathroom").val()){var F=$("#search-select-bathroom").val();void 0!==F&&n.push("minBathrooms="+F)}if($("#search-select-xlisting").is(":checked")&&n.push("spvFilter=true"),$("#search-select-v360").is(":checked")&&n.push("vt360Filter=true"),$("#search-select-drone").is(":checked")&&n.push("droneViewFilter=true"),$("#search-select-classifieds").is(":checked")&&n.push("pcFilter=true"),""!=$("#search-select-date-posted").val()){var O=new Date;O.setDate(O.getDate()-$("#search-select-date-posted").val());var E=new Date(O),N=E.getFullYear()+"-"+(E.getMonth()+1)+"-"+E.getDate();"NaN-NaN-NaN"!==N&&n.push("minDateFirstPosted="+N)}if(""!=$("#search-select-constructed-min").val()){var U=$("#search-select-constructed-min").val();if(void 0!==U)j=r(U);void 0!==j&&(j=j.replace(/\D/g,"")),m(j)&&n.push("builtYearMin="+j)}if(""!=$("#search-select-constructed-max").val()){var H=$("#search-select-constructed-max").val();if(void 0!==H)var j=r(H);void 0!==j&&(j=j.replace(/\D/g,"")),m(j)&&n.push("builtYearMax="+j)}if(""!=$("#search-select-hdb-block-from").val()&&81==t){var X=$("#search-select-hdb-block-from").val();if(void 0!==X)var q=r(X);void 0!==q&&(q=q.replace(/\D/g,"")),m(q)&&n.push("minBlk="+q)}if(""!=$("#search-select-hdb-block-to").val()&&81==t){var Y=$("#search-select-hdb-block-to").val();if(void 0!==Y)var _=r(Y);void 0!==_&&(_=_.replace(/\D/g,"")),m(_)&&n.push("maxBlk="+_)}if(""!=$("#landSizeSelectMin").val()&&85==t){var G=$("#landSizeSelectMin").val();if(void 0!==G)J=r(G);void 0!==J&&(J=J.replace(/\D/g,"")),m(J)&&n.push("minLandSize="+J)}if(""!=$("#landSizeSelectMax").val()&&85==t){if(void 0!==$("#landSizeSelectMax").val())var J=r($("#landSizeSelectMax").val());void 0!==J&&(J=J.replace(/\D/g,"")),m(J)&&n.push("maxLandSize="+J)}var K="",Q="",Z="",ee=$(".landmarkDistrictSectionContent input[name=landmarkDistrictValue]:checked");if($.each(ee,function(e){Q+=$(this).val(),e<ee.length-1&&(Q+=",")}),0!=v&&(Q=""+v),Q.length>0)K=Q,n.push("selectedDistrictIds="+Q);else{var ae=$(".landmarkTownSection input[name=landmarkTownValue]:checked");$.each(ae,function(e){Z+=$(this).val(),e<ae.length-1&&(Z+=",")}),0!=f&&(Z=""+f),Z.length>0&&k&&(K=Z,n.push("selectedHdbTownIds="+Z))}k||""!=y&&n.push("selectedAmenitiesIds="+y);var te,le="";0==(te=$(".landmarkMrtSectionContent input[name=landmarkMrtValue]:checked")).length&&(te=$(".landmarkSchoolsContainer input[name=landmarkSchoolValue]:checked")),0==te.length&&(te=$(".landmarkLifestylesContainer input[name=landmarkLifestyleValue]:checked")),te.length>0&&($.each(te,function(e){le+=$(this).val(),e<te.length-1&&(le+=",")}),le.length>0&&(K=le,n.push("selectedAmenitiesIds="+le),n.push("radiusInKm=1")),""!=K&&_gaq.push(["_trackEvent","SRX Locate Search","Search Location",K])),""==Q&&0==Q.length&&0==Z.length&&0==y.length&&""==le&&(url+=e,"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","SRX Locate Search","Search Location",e]));for(var re=0;re<n.length;++re){var ne=0==re?"?":"&";url+=ne+n[re]}if(""!=e){e=r(e),url;s(),ga("send","pageview","/search?s="+e)}window.location.href=url},ue=function(){"sale"==("R"==$("#commercialTypeSelect").val()?"rent":"sale")?($("#commercialSalePriceSelect").show(),$("#commercialRentPriceSelect").hide(),$("#commercialTenureSelectWrapper").show(),$("#commercialMrtSelectWrapper").addClass("hidden")):($("#commercialRentPriceSelect").show(),$("#commercialSalePriceSelect").hide(),$("#commercialTenureSelectWrapper").hide(),$("#commercialMrtSelectWrapper").removeClass("hidden"))};$("#commercialTypeSelect").change(function(){ue()}),ue();var ve=function(){var e=$.trim($("#commercialSearchTypeahead").val());""!=e&&(""!=(e=$.trim($("#commercialSearchTypeahead").val()))&&$(".typeahead-container-data").length&&$(".typeahead-container-data").first().hasClass("typeahead-container-data-extended")&&(e=$(".typeahead-container-data").first().html()),e=(e=(e=e.replace(new RegExp("\\+","g"),"%2B")).replace(new RegExp(" ","g"),"+")).replace(new RegExp("/","g"),"+"));var a="R"==$("#commercialTypeSelect").val()?"rent":"sale",t="/search/"+a+"/commercial/",l=[];$(".commercialSubtypeSelect:visible").val(),""!=$("#commercialLocationSelect").val()&&void 0!=$("#commercialLocationSelect").val()&&l.push("selectedDistrictIds="+$("#commercialLocationSelect").val()),""!=$("#commercialTenureSelect").val()&&void 0!=$("#commercialTenureSelect").val()&&l.push("tenure="+$("#commercialTenureSelect").val());var n=1,i="sale"==a?"minSalePrice":"minRentPrice",c="sale"==a?"maxSalePrice":"maxRentPrice";if(""!=$("#commercialSearchTabPane .sale-select-price-min").val()){var o=r($("#commercialSearchTabPane .sale-select-price-min").val());void 0!==o&&(o=o.replace(/\D/g,"")),m(o)&&l.push(i+"="+o)}if(""!=$("#commercialSearchTabPane .sale-select-price-max").val()){var d=r($("#commercialSearchTabPane .sale-select-price-max").val());void 0!==d&&(d=d.replace(/\D/g,"")),m(d)&&l.push(c+"="+d)}if(""!=$("#bedroomSelectCommercial").val()){var h=$("#bedroomSelectCommercial").val();void 0!==h&&(l.push("maxBedrooms="+h),l.push("minBedrooms="+h))}if(""!=$("#sizeSelectCommercialMin").val()){void 0!==(p=r($("#sizeSelectCommercialMin").val()))&&(p=p.replace(/\D/g,"")),m(p)&&l.push("minBuiltSize="+p)}if(""!=$("#sizeSelectCommercialMax").val()){var p=r($("#sizeSelectCommercialMax").val());void 0!==p&&(p=p.replace(/\D/g,"")),m(p)&&l.push("maxBuiltSize="+p)}var u=$("#search-select-psf-min-commercial").val();void 0!==u&&l.push("minPSF="+u);var v=$("#search-select-psf-max-commercial").val();void 0!==v&&l.push("maxPSF="+v);var f=$("#search-select-tenure-commercial").val();void 0!==f&&l.push("tenure="+f);var y=$("#search-select-floor-level-commercial").val();void 0!==y&&l.push("floor="+y);var g=$("#search-select-bathroom-commercial").val();void 0!==g&&l.push("minBathrooms="+g),$("#search-select-xlisting-commercial").is(":checked")&&l.push("spvFilter=true"),$("#search-select-v360-commercial").is(":checked")&&l.push("vt360Filter=true"),$("#search-select-classifieds-commercial").is(":checked")&&l.push("pcFilter=true");var k=$("#search-select-condition-commercial").val();if(void 0!==k&&l.push("condition="+k),""!=$("#search-select-date-posted-commercial").val()){var x=new Date;x.setDate(x.getDate()-$("#search-select-date-posted-commercial").val());var S=new Date(x),T=S.getFullYear()+"-"+(S.getMonth()+1)+"-"+S.getDate();"NaN-NaN-NaN"!==T&&l.push("minDateFirstPosted="+T)}if(""!=$("#search-select-constructed-commercial-min").val()){void 0!==(b=r($("#search-select-constructed-commercial-min").val()))&&(b=b.replace(/\D/g,"")),m(b)&&l.push("builtYearMin="+b)}if(""!=$("#search-select-constructed-commercial-max").val()){var b=r($("#search-select-constructed-commercial-max").val());void 0!==b&&(b=b.replace(/\D/g,"")),m(b)&&l.push("builtYearMax="+b)}var C="",P="",M="",V=$(".landmarkDistrictSectionContent input[name=landmarkDistrictValue]:checked");if($.each(V,function(e){P+=$(this).val(),e<V.length-1&&(P+=",")}),P.length>0)C=P,l.push("selectedDistrictIds="+P);else{var L=$(".landmarkTownSection input[name=landmarkTownValue]:checked");$.each(L,function(e){M+=$(this).val(),e<L.length-1&&(M+=",")}),M.length>0&&(C=M,l.push("selectedHdbTownIds="+M))}if(0==w||2!=w&&3!=w&&4!=w)0==P.length&&0==M.length&&(t+=e,"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","SRX Locate Search","Search Location",e]));else{var D,I="",n=1;2==w?D=$(".landmarkMrtSectionContent input[name=landmarkMrtValue]:checked"):3==w?D=$(".landmarkSchoolsContainer input[name=landmarkSchoolValue]:checked"):4==w&&(D=$(".landmarkLifestylesContainer input[name=landmarkLifestyleValue]:checked")),$.each(D,function(e){I+=$(this).val(),e<D.length-1&&(I+=",")}),I.length>0&&(C=I,l.push("selectedAmenitiesIds="+I),l.push("radiusInKm="+n)),""!=C&&_gaq.push(["_trackEvent","SRX Locate Search","Search Location",C])}for(var A=0;A<l.length;++A){t+=(0==A?"?":"&")+l[A]}if(""!=e){searchString=r(e);searchString;s()}window.location.href=t};$("#commercialSearchTabPane > form").submit(function(e){e.preventDefault(),ve()}),"xvalue"==$("#srxHomeTab").val()&&$(".srxMainSearchConsoleContent").find(".nav").first().find("li").last().find("a").click(),window.addEventListener("pageshow",function(e){$("#xValueTabPane input[type=text]").val("")}),$("#searchBarShowOptions").click(function(){$(this).hasClass("open")?($("#searchBarHiddenOnMobile").slideUp(),$("#searchBarShowOptions span").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"),$(this).removeClass("open")):($("#searchBarHiddenOnMobile").slideDown(),$("#searchBarShowOptions span").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"),$(this).addClass("open"))}),$("#commercialSearchBarShowOptions").click(function(){$(this).hasClass("open")?($("#commercialSearchBarHiddenOnMobile").slideUp(),$("#commercialSearchBarShowOptions span").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"),$(this).removeClass("open")):($("#commercialSearchBarHiddenOnMobile").slideDown(),$("#commercialSearchBarShowOptions span").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"),$(this).addClass("open"))}),!D.any()&&$.fn.matchHeight&&($(".sph-sub-article-main").matchHeight(),$(".srx-property-news-burst").matchHeight({byRow:!1}),$(".srx-analysis-xtv").matchHeight({byRow:!1}),D.iOSPad()||$(".srx-analysis-xtv-news").matchHeight({byRow:!1}),D.iOSPad()&&$(window).width()>1e3&&$(".srx-analysis-xtv-news").matchHeight({byRow:!1}),$(".featured-property-listings-content .srx-listing-panel").matchHeight({byRow:!1}),$(".featured-property-listings-content .srx-listing-panel-fl").matchHeight({byRow:!1}),$(".useful-property-tech-content-2").matchHeight({byRow:!1})),D.any()&&($("#searchTextbox").attr("placeholder","Type or Select Location (e.g. Project)"),$("#commercialSearchTypeahead").attr("placeholder","Type or Select Location (e.g. Project)")),$("#v36-map-overlay").click(function(){$(this).remove(),$("#srx-main-v360-image").css("background-image",""),$("#srx-main-v360-image").html("<iframe id='srx-main-v360-iframe' src='http://v360property.com/portfolio/srx/normaterrace/v360.html' allowfullscreen='' frameborder=''></iframe>")}),$("#mainStepsViewMore a").click(function(e){$(this).hasClass("showLess")?($(".mainStepsParent").removeClass("mainStepsForce"),$(this).addClass("showMore").removeClass("showLess").html("Show More")):($(".mainStepsParent").addClass("mainStepsForce"),$(this).addClass("showLess").removeClass("showMore").html("Show Less")),e.preventDefault()}),enquire.register("screen and (max-width:480px)",{match:function(){setInterval(e,5e3),X()}});var $e={placement:"top",html:!0,selector:"#xValuePESWrapperArea",width:"500",trigger:"manual",template:'<div class="popover fade bottom in showXValueGetSizeMsg" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',content:function(){return"<p style='color: #333; margin-bottom: 0px;'>The suggested external size is an estimate, please verify before proceeding.</p>"}};$("#xValuePESWrapperArea").popover($e),$("#xValuePESWrapperCheckbox input[type=checkbox]").click(function(){$(this).is(":checked")?($("#xValuePESWrapperCheckbox").hide(),$("#xValuePESWrapperArea").show(),$('#xValueTabPane [name="xValuePES"]').focus(),""!=$("input[name='xValuePES']").val()&&fe()):($("#xValuePESWrapperCheckbox").show(),$("#xValuePESWrapperArea").hide())});var fe=function(){""!=$("input[name='xValuePES']").val()&&($("#xValuePESWrapperArea").popover("destroy").popover($e).popover("show"),setTimeout(function(){$("#xValuePESWrapperArea").popover("hide").popover("destroy").popover($e)},3e3))};$(".moreOptionsWrapperLink").click(function(e){var a="#mainSearchTabPane ";T||(a="#commercialSearchTabPane "),$(a+".more-options-div").hasClass("show")?($(a+".more-options-div").removeClass("show"),D.any()&&$(".listingSearchMobile").removeClass("show").addClass("hide")):($(a+".more-options-div").addClass("show"),D.any()&&$(".listingSearchMobile").addClass("show").removeClass("hide")),e.preventDefault()}),$(".search-submit-button").click(function(){$(this).hasClass("search-submit-search-button")||($(".more-options-div").removeClass("show"),$("#mainSearchTabPane .moreOptionsWrapper a .glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus"),$("#commercialSearchTabPane .moreOptionsWrapper a .glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus"),$(".moreOptionsWrapperLink").find(".selectWrapperUpIcon").removeClass("selectWrapperUpIcon").addClass("selectWrapperDownIcon"))}),$(".search-reset-button").click(function(){$("#bedroomSelect").val(""),$("#bedroomSelectCommercial").val(""),$("#sizeSelect").val(""),$("#sizeSelectCommercial").val(""),$("#search-select-psf-min").val(""),$("#search-select-psf-max").val(""),$("#search-select-psf-min-commercial").val(""),$("#search-select-psf-max-commercial").val(""),$("#search-select-tenure").val(""),$("#search-select-tenure-commercial").val(""),$(".search-select-bathroom").val(""),$("#search-select-bathroom").val(""),$("#search-select-bathroom-commercial").val(""),$("#search-select-furnish").val(""),$("#search-select-furnish-commercial").val(""),$("#search-select-floor-level").val(""),$("#search-select-floor-level-commercial").val(""),$("#search-select-date-posted").val(""),$("#search-select-date-posted-commercial").val(""),$("#search-select-xlisting").attr("checked",!1),$("#search-select-v360").attr("checked",!1),$("#search-select-drone").attr("checked",!1),$("#search-select-classifieds").attr("checked",!1),$("#search-select-xlisting-commercial").attr("checked",!1),$("#search-select-v360-commercial").attr("checked",!1),$("#search-select-classifieds-commercial").attr("checked",!1),$("#search-select-constructed").val(""),$("#search-select-constructed-commercial").val(""),$(".leftValue").val(""),$(".rightValue").val(""),$(".input-sublabel").text("Any"),$("#search-select-roomRental").attr("checked",!1)}),$(".salePriceSelect").click(function(e){var l=T?"#mainSearchTabPane ":"#commercialSearchTabPane ";$(l+".price-range-div").hasClass("shown")?($(l+".price-range-div").removeClass("shown"),$(l+".salePriceSelect").find(".selectWrapperUpIcon").removeClass("selectWrapperUpIcon").addClass("selectWrapperDownIcon")):($(l+".price-range-div").addClass("shown"),$(l+".salePriceSelect").find(".selectWrapperDownIcon").removeClass("selectWrapperDownIcon").addClass("selectWrapperUpIcon"),""!=$(l+".sale-select-price-min").val()&&(t($(l+".sale-select-price-min").val(),0,""),a("left")),D.any()&&$("#searchSubmitWrapper button").removeClass("hide")),e.preventDefault(),this.blur(),window.focus()}),$(".price-range-div .map-filter").focus(function(){var e=$(this).attr("data-size");$(".price-range-div .select-list li").removeClass("selected");var t=$(this).closest("#mainSearchTabPane").length>0?"#mainSearchTabPane ":"#commercialSearchTabPane ",n=$(this).val(),s="",i="";""!=n&&(s=l(n=r(n))),""!=n&&$(this).hasClass("sale-select-price-min")?""==$(t+".sale-select-price-max").val()&&(i="Min $"+s):""!=n&&$(this).hasClass("sale-select-price-max")&&""==$(t+".sale-select-price-min").val()&&(i="Max $"+s),""!=i&&$(t+".priceWrapperAnyMinMax").text(i),a("max"==e?"right":"left")}),$(".price-range-div .select-list li").click(function(e){var t=T?"#mainSearchTabPane ":"#commercialSearchTabPane ",r=$(this).attr("value"),n="";if($(t+".priceWrapperAnyMinMax").show(),$(t+".priceWrapperAnyPrice").hide(),$(this).hasClass("disabled")||""==r||$(this).hasClass("select-price-no-min-max")){if($(this).hasClass("select-price-no-min-max")){var s="";0==$(".price-range-div .select-list.max").length?($(t+".sale-select-price-min").val(""),a("right"),""!=$(t+".sale-select-price-max").val()&&(s="Max $"+l($(".sale-select-price-max").val()))):($(t+".sale-select-price-max").val(""),$(t+".price-range-div").removeClass("shown"),""!=$(t+".sale-select-price-min").val()&&(s="Min $"+l($(".sale-select-price-min").val())),$(t+".salePriceSelect").find(".selectWrapperUpIcon").removeClass("selectWrapperUpIcon").addClass("selectWrapperDownIcon")),""!=s?$(t+".priceWrapperAnyMinMax").text(s):$(t+".priceWrapperAnyMinMax").text("")}}else{var i=l(r);0==$(t+".price-range-div .select-list.max").length?($(t+".sale-select-price-min").val(i),n="Min $"+i,$(t+".priceWrapperAnyPrice").hide(),a("right")):($(t+".sale-select-price-max").val(i),$(t+".price-range-div").removeClass("shown"),n=""!=$(t+".sale-select-price-min").val()?"$"+l($(t+".sale-select-price-min").val())+"-"+i:"Max $"+i,$(t+".priceWrapperAnyMinMax").text(n),$(t+".priceWrapperAnyPrice").hide(),$(t+".salePriceSelect").find(".selectWrapperUpIcon").removeClass("selectWrapperUpIcon").addClass("selectWrapperDownIcon")),$(t+".priceWrapperAnyMinMax").text(n)}""==$(t+".priceWrapperAnyMinMax").text()&&$(t+".priceWrapperAnyPrice").show()}),$(".search-select-bathroom-minus").click(function(e){var a=n(),t=(a=a>1?parseInt(a)-1:"")>1?" Bathrooms (Min)":" Bathroom (Min)";0==a&&(t=""),$(".search-select-bathroom").val(a+t).change(),$(this).closest(".search-more-bedroom-div").find("#search-select-bathroom").length>0?$("#search-select-bathroom").val(a):$("#search-select-bathroom-commercial").val(a)}),$(".search-select-bathroom-plus").click(function(e){var a=n(),t=a>1?" Bathrooms (Min)":" Bathroom (Min)";""==a?a=1:a<9?a=parseInt(a)+1:(a="",t=""),$(".search-select-bathroom").val(a+t).change(),$(this).closest(".search-more-bedroom-div").find("#search-select-bathroom").length>0?$("#search-select-bathroom").val(a):$("#search-select-bathroom-commercial").val(a)}),$(".more-options-div .select-input-div").click(function(e){var a=$(this).attr("show"),t=($(this),"#mainSearchTabPane ");T||(t="#commercialSearchTabPane "),D.any()?$(t+"."+a).is(":visible")?($(t+"."+a).hide(),$(this).find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")):($(t+"."+a).show(),$(this).find(".glyphicon-chevron-down").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"),$(this).next().find(".select-drop-down").length>0&&($(this).next().find(".select-drop-down .leftValue").focus(),$(this).next().find(".select-drop-down .leftValue").blur())):($(t+".select-select-div").hide(),$(t+"."+a).show(),$(this).find(".glyphicon-chevron-down").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"),$(this).next().find(".select-drop-down").length>0&&$(this).next().find(".select-drop-down .leftValue").focus()),$(".select-drop-minmax").removeClass("minmax-right").addClass("minmax-left"),$(".select-drop-side").removeAttr("style"),e.preventDefault()}),$(".more-options-div .select-list li").click(function(){var e=$(this),a=e.text(),t=e.attr("value");e.closest(".select-select-div").prev().find(".input-sublabel").text(a),e.closest(".select-select-div").hide(),e.parent().next().val(t),$(this).closest(".select-select-div").prev().find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")}),$(document).mouseup(function(e){$(e.target).attr("class"),$(e.target)}),window.setSearchCookie=function(e,a){var t=new Date;(t=new Date).setTime(t.getTime()+2592e6);var l="expires="+t.toUTCString();document.cookie=e+"="+a+"; "+l+"; path=/"};var ye=$("#landmarkHeader a"),ge=$(".landmarkSection");$("#landmarkTabLocation").click(function(e){e.preventDefault(),ye.removeClass("selected"),$(this).addClass("selected"),ge.hide(),$("#landmarkLocation").show(),w=0}),$("#landmarkTabDistrict").click(function(e){e.preventDefault(),ye.removeClass("selected"),$(this).addClass("selected"),ge.hide(),$("#landmarkDistrict").show(),i("#landmarkDistrict"),w=1}),$("#landmarkTabTown").click(function(e){e.preventDefault(),ye.removeClass("selected"),$(this).addClass("selected"),ge.hide(),$("#landmarkTown").show(),i("#landmarkTown"),w=5}),$("#landmarkTabMrt").click(function(e){e.preventDefault(),Qe(),ye.removeClass("selected"),$(this).addClass("selected"),ge.hide(),$("#landmarkMrt").show(),i("#landmarkMrt"),w=2}),$("#landmarkTabSchool").click(function(e){e.preventDefault(),Ze(),ye.removeClass("selected"),$(this).addClass("selected"),ge.hide(),$("#landmarkSchool").show(),i("#landmarkSchool"),w=3}),$("#landmarkTabLifestyle").click(function(e){e.preventDefault(),ea(),ye.removeClass("selected"),$(this).addClass("selected"),ge.hide(),$("#landmarkLifestyle").show(),i("#landmarkLifestyle"),w=4});var ke="",xe=$("input[name=landmarkDistrictValue]"),Se=function(){var e=!0;$(".landmarkDistrictSectionContent").each(function(){var a=!0;$(this).find("input[name=landmarkDistrictValue]").each(function(){if(!$(this).is(":checked"))return a=!1,e=!1,!1}),a?$(this).parent().find(".landmarkDistrictSectionHeader").find("input[type=checkbox]").prop("checked",!0):$(this).parent().find(".landmarkDistrictSectionHeader").find("input[type=checkbox]").prop("checked",!1)}),e?$("#landmarkDistrictCheckAll").text("Uncheck All"):$("#landmarkDistrictCheckAll").text("Check All")},Te=[],be=[];xe.click(function(){var e=$(this).prop("checked"),a=$(this).val(),t=$("input[name='landmarkDistrictValue']").index(this),l=$("input[name='landmarkDistrictValue']")[t].nextSibling.nodeValue;if(e)be.push("District "+a),Te.push(l);else{var r=be.indexOf("District "+be);be.splice(r,1);var n=Te.indexOf(l);Te.splice(n,1)}if(Te.length>1){Te.sort();Te.join(", ");$("#searchTextbox").typeahead("val",be.join(", "))}else 1==Te.length?$("#searchTextbox").typeahead("val",Te):$("#searchTextbox").typeahead("val","");De=[],ze=[],Oe=[],$("#amenitiesIds").val(""),Se()}),$("#landmarkDistrictCheckAll").click(function(){"Check All"==$(this).text()?xe.prop("checked",!0):xe.prop("checked",!1),Se()}),$("input[name=landmarkDistrictSuball]").click(function(){var e=$(this).closest(".landmarkDistrictSection").find("input[name=landmarkDistrictValue]");$(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),Se();var a="";e.each(function(){a+="District "+$(this).val()+", "}),$("#searchTextbox").typeahead("val",a)});var Ce=$("input[name=landmarkTownValue]"),we=function(){var e=!0;Ce.each(function(){if(!$(this).is(":checked"))return e=!1,!1}),e?$("#landmarkTownCheckAll").text("Uncheck All"):$("#landmarkTownCheckAll").text("Check All")};Ce.click(function(){we()}),$("#landmarkTownCheckAll").click(function(){"Check All"==$(this).text()?Ce.prop("checked",!0):Ce.prop("checked",!1),we()});var Pe=[],Me=function(){var e=[];if($("input[name=landmarkMrtValue]:checked").each(function(){e.push($(this).val())}),$.each(Pe,function(e){Pe[e].setMap(null)}),Pe=[],e.length<=0)return $("#landmarkMrtStations").hide(),$("#landmarkMrtMapContainer").show().removeClass("hide"),google.maps.event.trigger(qe,"resize"),void qe.setCenter(new google.maps.LatLng(g.latitude,g.longitude));$.ajax("/srx/project/getAmenitiesForProjectSearchById/redefinedSearch.srx",{type:"GET",cache:!1,dataType:"json",contentType:"application/json",data:{ids:e},error:function(e){alert(JSON.stringify(e)),alert("error")},success:function(e){if(e.error)alert(e.error);else{var a=e.result;$.each(a,function(e){var t=a[e],l={strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:qe,center:new google.maps.LatLng(t.latitude,t.longitude),radius:1e3*$("#landmarkMrtDistanceSelect").find(":selected").val()},r=new google.maps.Circle(l);Pe.push(r)}),$("#landmarkMrtStations").hide(),$("#landmarkMrtMapContainer").show().removeClass("hide"),google.maps.event.trigger(qe,"resize"),qe.panTo(Pe[Pe.length-1].getCenter())}}})};$("#landmarkMrtSelect").click(function(){$("#landmarkMrtMapContainer").is(":visible")?($("#landmarkMrtMapContainer").hide(),$("#landmarkMrtStations").show()):Me()}),$("#landmarkMrtDistanceSelect").change(function(){var e=$(this).val();$.each(Pe,function(a){Pe[a].setRadius(1e3*e)})});var Ve=$("input[name=landmarkMrtValue]"),Le=function(){$(".landmarkMrtSectionContent").each(function(){var e=!0;$(this).find("input[name=landmarkMrtValue]").each(function(){if(!$(this).is(":checked"))return e=!1,!1}),e?$(this).parent().find(".landmarkMrtSectionHeader").find("input[type=checkbox]").prop("checked",!0):$(this).parent().find(".landmarkMrtSectionHeader").find("input[type=checkbox]").prop("checked",!1)});var e=$(".landmarkMrtSection").find("input[name=landmarkMrtValue]:checked");1==e.length?$("#landmarkMrtSelect").text(e.parent().text()):e.length>1?$("#landmarkMrtSelect").text("Selected "+e.length+" Stations"):$("#landmarkMrtSelect").text("")},De=[];Ve.click(function(){var e=$(this).prop("checked"),a=($(this).val(),$("input[name='landmarkMrtValue']").index(this)),t=$("input[name='landmarkMrtValue']")[a].nextSibling.nodeValue;if(e)De.push(t);else{var l=De.indexOf(t);De.splice(l,1)}De.length>1?$("#searchTextbox").typeahead("val",De.join(", ")):1==De.length?$("#searchTextbox").typeahead("val",De):$("#searchTextbox").typeahead("val",""),Te=[],be=[],ze=[],Oe=[],Le()}),$("#landmarkMrtCheckAll").click(function(){$("input[name=landmarkMrtValue]").prop("checked",!1),Le()}),$("input[name=landmarkMrtSuball]").click(function(){var e=$(this).closest(".landmarkMrtSection").find("input[name=landmarkMrtValue]");$(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),Le();var a="";e.each(function(){a+=$(this).parent().text()+", "}),$("#searchTextbox").typeahead("val",a)});var Ie={};$("#landmarkMrtLeftList li").click(function(){window.screen.width,window.screen.width;if($("#landmarkMrtRight").hasClass("scrolling")){setTimeout(function(e){e.click()},100,$(this))}else{if($(this).hasClass("selected"))return;$.isEmptyObject(Ie)&&c(),$("#landmarkMrtLeftList li").removeClass("selected"),$(this).addClass("selected"),$("#landmarkMrtStationSearch").val(""),$("#landmarkMrtSearchPanel").hide();var e=$(this).attr("title");$("#landmarkMrtRight").off("scroll");var a=window.screen.width>=768?60:120;$("#landmarkMrtRight").addClass("scrolling").animate({scrollTop:Ie[e]-a},450,"swing",function(){setTimeout(function(e){e.removeClass("scrolling"),$("#landmarkMrtRight").on("scroll",Ae)},400,$(this))})}}),$("#landmarkMrtRight").on("scroll",function(e){$.isEmptyObject(Ie)&&(c(),$("#landmarkMrtRight").off("scroll"),$("#landmarkMrtRight").on("scroll",Ae))});var Ae=function(e){if(!$("#landmarkMrtRight").hasClass("scrolling")){var a=$(this);$("#landmarkMrtLeftList li").removeClass("selected");var t=window.screen.width>=768?60:120;a.scrollTop()>Ie.landmarkMrtPG-t?$('#landmarkMrtLeftList li[title="landmarkMrtPG"]').addClass("selected"):a.scrollTop()>Ie.landmarkMrtSK-t?$('#landmarkMrtLeftList li[title="landmarkMrtSK"]').addClass("selected"):a.scrollTop()>Ie.landmarkMrtBP-t?$('#landmarkMrtLeftList li[title="landmarkMrtBP"]').addClass("selected"):a.scrollTop()>Ie.landmarkMrtTE-t?$('#landmarkMrtLeftList li[title="landmarkMrtTE"]').addClass("selected"):a.scrollTop()>Ie.landmarkMrtDT-t?$('#landmarkMrtLeftList li[title="landmarkMrtDT"]').addClass("selected"):a.scrollTop()>Ie.landmarkMrtCC-t?$('#landmarkMrtLeftList li[title="landmarkMrtCC"]').addClass("selected"):a.scrollTop()>Ie.landmarkMrtNE-t?$('#landmarkMrtLeftList li[title="landmarkMrtNE"]').addClass("selected"):a.scrollTop()>Ie.landmarkMrtNS-t?$('#landmarkMrtLeftList li[title="landmarkMrtNS"]').addClass("selected"):$('#landmarkMrtLeftList li[title="landmarkMrtEW"]').addClass("selected")}};$("#landmarkMrtDone").click(function(e){e.preventDefault(),Me()}),$("#landmarkMrtStationSearch").keyup(function(){var e=$(this).val(),a=[];if(e.length){$(".landmarkMrtSection").hide(),$("#landmarkMrtSearchPanel").html(""),$("#landmarkMrtSearchPanel").show();var t=!1;$.each(Ve,function(){if($(this).parent().text().trim().toLowerCase().match("^"+e.toLowerCase())&&$.inArray($(this).val(),a)<0){a.push($(this).val());var l=$(this).parent().clone();$("#landmarkMrtSearchPanel").append(l),t=!0,l.find("input[name=landmarkMrtValue]").click(function(){var e=$(this).val();$(".landmarkMrtSection").find('input[value="'+e+'"]').click()})}}),t||$("#landmarkMrtSearchPanel").append('<p>No results match "'+e+'"</p>')}else $(".landmarkMrtSection").show(),$("#landmarkMrtSearchPanel").hide()});var Be=[],Re=function(){var e=[];if($("input[name=landmarkSchoolValue]:checked").each(function(){e.push($(this).val())}),$.each(Be,function(e){Be[e].setMap(null)}),Be=[],e.length<=0)return $("#landmarkSchools").hide(),$("#landmarkSchoolMapContainer").show().removeClass("hide"),google.maps.event.trigger(Ge,"resize"),void Ge.setCenter(new google.maps.LatLng(g.latitude,g.longitude));$.ajax("/srx/project/getAmenitiesForProjectSearchById/redefinedSearch.srx",{type:"GET",cache:!1,dataType:"json",contentType:"application/json",data:{ids:e},error:function(e){alert(JSON.stringify(e)),alert("error")},success:function(e){if(e.error)alert(e.error);else{var a=e.result;$.each(a,function(e){var t=a[e],l={strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:Ge,center:new google.maps.LatLng(t.latitude,t.longitude),radius:1e3*$("#landmarkSchoolDistanceSelect").find(":selected").val()},r=new google.maps.Circle(l);Be.push(r)}),$("#landmarkSchools").hide(),$("#landmarkSchoolMapContainer").show().removeClass("hide"),google.maps.event.trigger(Ge,"resize"),a.length>0&&Ge.panTo(Be[Be.length-1].getCenter())}}})};$("#landmarkSchoolSelect").click(function(){$("#landmarkSchoolMapContainer").is(":visible")?($("#landmarkSchoolMapContainer").hide(),$("#landmarkSchools").show()):Re()}),$("#landmarkSchoolDistanceSelect").change(function(){var e=$(this).val();$.each(Be,function(a){Be[a].setRadius(1e3*e)})}),$("#landmarkSchoolsLeftList li").click(function(){if(!$(this).hasClass("selected")){$("#landmarkSchoolsLeftList li").removeClass("selected"),$(this).addClass("selected"),$(".landmarkSchoolsWrapper").hide(),$("#landmarkSchoolsSearch").val(""),$("#landmarkSchoolSearchPanel").hide();var e=$(this).attr("title");$("#"+e).show()}}),$("#landmarkSchoolsLeftList li:first-child").click();var ze=[];$(".landmarkSchoolsWrapper input[name=landmarkSchoolValue]").click(function(){var e=$(".landmarkSchoolsWrapper input[name=landmarkSchoolValue]:checked");1==e.length?$("#landmarkSchoolSelect").text(e.parent().text()):e.length>1?$("#landmarkSchoolSelect").text("Selected "+e.length+" Schools"):$("#landmarkSchoolSelect").text("");var a=$(this).prop("checked"),t=$("input[name='landmarkSchoolValue']").index(this),l=$("input[name='landmarkSchoolValue']")[t].nextSibling.nodeValue;if(a)ze.push(l);else{var r=be.indexOf(l);ze.splice(r,1)}if(ze.length>1){var n=ze.join(", ");$("#searchTextbox").typeahead("val",n)}else 1==ze.length?$("#searchTextbox").typeahead("val",ze):$("#searchTextbox").typeahead("val","");Te=[],be=[],De=[],Oe=[]}),$("#landmarkSchoolsCheckAll").click(function(){$("input[name=landmarkSchoolValue]").prop("checked",!1),$("#landmarkSchoolSelect").text("")}),$("#landmarkSchoolDone").click(function(){Re()}),$("#landmarkSchoolsSearch").keyup(function(){var e=$(this).val(),a=[];if(e.length){$("#landmarkSchoolsLeftList li").removeClass("selected"),$(".landmarkSchoolsWrapper").hide(),$("#landmarkSchoolSearchPanel").html(""),$("#landmarkSchoolSearchPanel").show();var t=!1;$.each($(".landmarkSchoolsWrapper input[name=landmarkSchoolValue]"),function(){if($(this).parent().text().trim().toLowerCase().match("^"+e.toLowerCase())&&$.inArray($(this).val(),a)<0){a.push($(this).val());var l=$(this).parent().clone();$("#landmarkSchoolSearchPanel").append(l),t=!0,l.find("input[name=landmarkSchoolValue]").click(function(){var e=$(this).val();$(".landmarkSchoolsWrapper").find('input[value="'+e+'"]').click()})}}),t||$("#landmarkSchoolSearchPanel").append('<p>No results match "'+e+'"</p>')}else $(".landmarkSchoolsWrapper").first().show(),$("#landmarkSchoolsLeftList li").first().click(),$("#landmarkSchoolSearchPanel").hide()});var We=[],Fe=function(){var e=[];if($("input[name=landmarkLifestyleValue]:checked").each(function(){e.push($(this).val())}),$.each(We,function(e){We[e].setMap(null)}),We=[],e.length<=0)return $("#landmarkLifestyles").hide(),$("#landmarkLifestyleMapContainer").show().removeClass("hide"),google.maps.event.trigger(Ke,"resize"),void Ke.setCenter(new google.maps.LatLng(g.latitude,g.longitude));$.ajax("/srx/project/getAmenitiesForProjectSearchById/redefinedSearch.srx",{type:"GET",cache:!1,dataType:"json",contentType:"application/json",data:{ids:e},error:function(e){alert(JSON.stringify(e)),alert("error")},success:function(e){if(e.error)alert(e.error);else{var a=e.result;$.each(a,function(e){var t=a[e],l={strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:Ke,center:new google.maps.LatLng(t.latitude,t.longitude),radius:1e3*$("#landmarkLifestyleDistanceSelect").find(":selected").val()},r=new google.maps.Circle(l);We.push(r)}),$("#landmarkLifestyles").hide(),$("#landmarkLifestyleMapContainer").show().removeClass("hide"),google.maps.event.trigger(Ke,"resize"),Ke.panTo(We[We.length-1].getCenter())}}})};$("#landmarkLifestyleSelect").click(function(){$("#landmarkLifestyleMapContainer").is(":visible")?($("#landmarkLifestyleMapContainer").hide(),$("#landmarkLifestyles").show()):Fe()}),$("#landmarkLifestyleDistanceSelect").change(function(){var e=$(this).val();$.each(We,function(a){We[a].setRadius(1e3*e)})}),$("#landmarkLifestylesLeftList li").click(function(){if(!$(this).hasClass("selected")){$("#landmarkLifestylesLeftList li").removeClass("selected"),$(this).addClass("selected"),$(".landmarkLifestylesWrapper").hide(),$("#landmarkLifestylesSearch").val(""),$("#landmarkLifestyleSearchPanel").hide();var e=$(this).attr("title");$("#"+e).show()}}),$("#landmarkLifestylesLeftList li:first-child").click();var Oe=[];$(".landmarkLifestylesWrapper input[name=landmarkLifestyleValue]").click(function(){var e=$(".landmarkLifestylesWrapper input[name=landmarkLifestyleValue]:checked");1==e.length?$("#landmarkLifestyleSelect").text(e.parent().text()):e.length>1?$("#landmarkLifestyleSelect").text("Selected "+e.length+" Lifestyles"):$("#landmarkLifestyleSelect").text("");var a=$(this).prop("checked"),t=$("input[name='landmarkLifestyleValue']").index(this),l=$("input[name='landmarkLifestyleValue']")[t].nextSibling.nodeValue;if(a)Oe.push(l);else{var r=be.indexOf(l);Oe.splice(r,1)}if(Oe.length>1){var n=Oe.join(", ");$("#searchTextbox").typeahead("val",n)}else 1==Oe.length?$("#searchTextbox").typeahead("val",Oe):$("#searchTextbox").typeahead("val","");Te=[],be=[],De=[],ze=[]}),$("#landmarkLifestylesCheckAll").click(function(){$("input[name=landmarkLifestyleValue]").prop("checked",!1),$("#landmarkLifestyleSelect").text("")}),$("#landmarkLifestyleDone").click(function(){Fe()}),$("#landmarkLifestylesSearch").keyup(function(){var e=$(this).val(),a=[];if(e.length){$("#landmarkLifestylesLeftList li").removeClass("selected"),$(".landmarkLifestylesWrapper").hide(),$("#landmarkLifestyleSearchPanel").html(""),$("#landmarkLifestyleSearchPanel").show();var t=!1;$.each($(".landmarkLifestylesWrapper input[name=landmarkLifestyleValue]"),function(){if($(this).parent().text().trim().toLowerCase().match("^"+e.toLowerCase())&&$.inArray($(this).val(),a)<0){a.push($(this).val());var l=$(this).parent().clone();$("#landmarkLifestyleSearchPanel").append(l),t=!0,l.find("input[name=landmarkLifestyleValue]").click(function(){var e=$(this).val();$(".landmarkLifestylesWrapper").find('input[value="'+e+'"]').click()})}}),t||$("#landmarkLifestyleSearchPanel").append('<p>No results match "'+e+'"</p>')}else $(".landmarkLifestylesWrapper").first().show(),$("#landmarkLifestylesLeftList li").first().click(),$("#landmarkLifestyleSearchPanel").hide()}),$(".searchTextAmenitiesDistrict").click(function(e){$(".searchTextRecent").hide(),Xe("#advancedSearchLandmark"),ye.removeClass("selected"),$("#advancedSearchLandmark").css("display","inline-block !important"),$(".searchTextAmenitiesDistrictTown").hasClass("isHdb")?($("#landmarkTabDistrict").removeClass("selected").hide(),$("#landmarkTabTown").addClass("selected").show(),ge.hide(),$("#landmarkTown").show()):($("#landmarkTabDistrict").addClass("selected").show(),$("#landmarkTabTown").removeClass("selected").hide(),ge.hide(),$("#landmarkDistrict").show()),i("#landmarkDistrict"),e.preventDefault(),w=1}),$(".searchTextAmenitiesDistrict").hover(function(){$(this).addClass("selected")}),$(".searchTextAmenitiesMrt").click(function(e){Qe(),$(".searchTextRecent").hide(),Xe("#advancedSearchLandmark"),ye.removeClass("selected"),$("#landmarkTabMrt").addClass("selected"),ge.hide(),$("#landmarkMrt").show(),i("#landmarkMrt"),w=2,e.preventDefault()}),$(".searchTextAmenitiesSchool").click(function(e){Ze(),$(".searchTextRecent").hide(),Xe("#advancedSearchLandmark"),e.preventDefault(),ye.removeClass("selected"),$("#landmarkTabSchool").addClass("selected"),ge.hide(),$("#landmarkSchool").show(),i("#landmarkSchools"),w=3}),$(".searchTextAmenitiesLifestyle").click(function(e){ea(),$(".searchTextRecent").hide(),Xe("#advancedSearchLandmark"),e.preventDefault(),ye.removeClass("selected"),$("#landmarkTabLifestyle").addClass("selected"),ge.hide(),$("#landmarkLifestyle").show(),i("#landmarkLifestyle"),w=4}),$("#advancedSearchLandmarkApply, #landmarkRemove").click(function(e){ke="";if(1==w&&$("#landmarkDistrict").find("input[name=landmarkDistrictValue]").each(function(){var e=$(this);e.is(":checked")&&(ke+=e.parent().text().trim()+", ")}),5==w){$("#landmarkTown").find("input[name=landmarkTownValue]").each(function(){var e=$(this);e.is(":checked")&&(ke+=e.parent().text().trim()+", ")})}2==w&&$("#landmarkMrt").find("input[name=landmarkMrtValue]").each(function(){var e=$(this);e.is(":checked")&&(ke+=e.parent().text().trim()+", ")}),3==w&&$("#landmarkSchool").find("input[name=landmarkSchoolValue]").each(function(){var e=$(this);e.is(":checked")&&(ke+=e.parent().text().trim()+", ")}),4==w&&$("#landmarkLifestyle").find("input[name=landmarkLifestyleValue]").each(function(){var e=$(this);e.is(":checked")&&(ke+=e.parent().text().trim()+", ")}),""!=ke?(ke=ke.trim(),ke=ke.slice(0,-1),T?($("#searchTextbox").typeahead("val",ke),b=!0):($("#commercialSearchTypeahead").typeahead("val",ke),b=!1)):($("#searchTextbox").typeahead("val",""),$("#commercialSearchTypeahead").typeahead("val","")),Custombox.close("advancedSearchLandmark"),e.preventDefault()}),$(".select-drop-options-entry li").click(function(){var e=$(this),a=$(this).attr("value"),t="left",l=$(this).closest(".select-drop-down"),r=($(this).closest(".select-drop-down").find(".select-drop-minmax"),$(this).closest(".select-select-div").prev().attr("show"));if(!$(this).hasClass("disabled")){if($(this).closest(".select-drop-side").hasClass("select-drop-left")||(t="right"),"left"==t){$(this).closest(".select-drop-left").hide(),$(this).closest(".select-drop-options").find(".select-drop-right").show(),l.find(".leftValue").val(a),o(e,"right");d(l,l.find(".rightValue").val(),"right")}else $("."+r).hide(),l.find(".rightValue").val(a),o(e,"left");h(e,t)}}),$(".select-drop-range input").focus(function(){var e=$(this),a=$(this).attr("class"),t=e.val();"leftValue"==a?(o(e,"left"),d(e,t,"left")):(o(e,"right"),d(e,t,"right"))}),$(".select-drop-minmax").click(function(){var e=$(this),a="left",t=0;if(e.parent().find(".minmax-left").length>0)a="right",t=e.prev().find(".rightValue").val(),e.prev().find(".leftValue").val("");else{var l=$(this).closest(".select-select-div").prev().attr("show");$("."+l).hide(),e.prev().find(".rightValue").val(""),t=e.prev().find(".leftValue").val()}o(e,a),d(e,t,a),h(e,a)}),$(document).click(function(e){var a=e.target;$(a).is(".advancedPropertyTypeFinal")||$(a).is(".advancedPropertyTypePanel")||$(a).parents().is(".advancedPropertyTypePanel")||($(".advancedPropertyTypePanel").removeClass("show"),$(".advancedPropertyTypeFinal").removeClass("drop-up").addClass("drop-down")),$(a).is("#searchTypeahead")||$(a).is("#commercialSearchTypeahead")||$(a).is(".burgerWrapper")||$(a).is(".glyphicon-menu-hamburger")||$(a).is(".searchTextRecent")||$(a).parents().is(".searchTextRecent")||$(".searchTextRecent").removeClass("show"),$(a).is(".salePriceSelect")||$(a).is(".priceWrapperAnyPrice")||$(a).parents().is(".salePriceSelect")||$(a).is(".priceWrapperAnyMinMax")||$(a).is(".price-range-div")||$(a).parents().is(".price-range-div")||($(".price-range-div").removeClass("shown"),$(".salePriceSelect").find(".selectWrapperUpIcon").removeClass("selectWrapperUpIcon").addClass("selectWrapperDownIcon")),$(a).is(".moreOptionsWrapper")||$(a).parents().is(".moreOptionsWrapper")||$(a).is(".moreOptionsWrapperLink")||$(a).parents().is(".moreOptionsWrapperLink")||$(a).is(".more-options-div")||$(a).parents().is(".more-options-div")||($(".more-options-div").removeClass("show"),$(".moreOptionsWrapper a .glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus"),$(".moreOptionsWrapperLink").find(".selectWrapperUpIcon").removeClass("selectWrapperUpIcon").addClass("selectWrapperDownIcon")),$(a).is(".searchBarPriceContainer")||$(a).parents().is(".searchBarPriceContainer")||$(a).is(".sale-select-price-min")||$(a).is(".searchBarFloatingBox")||$(a).parents().is(".searchBarFloatingBox")||($(".searchBarFloatingBox").hide(),$(".searchBarPriceContainer a").removeClass("open")),$(a).is(".search-more-model-div")||$(a).parents().is(".propertyTypeModelInput")||$(a).parents().is(".show-more-model-div")||$(".search-more-model-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"),$(a).is(".search-more-bedrooms-div")||$(a).parents().is(".search-more-bedrooms-div")||$(a).parents().is(".search-select-bedroom-list")||($(".show-more-bedroom-div").hide(),$(".search-more-bedrooms-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-size-div")||$(a).parents().is(".search-more-size-div")||$(a).parents().is(".show-more-size-div")||($(".show-more-size-div").hide(),$(".search-more-size-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-tenure-div")||$(a).parents().is(".search-more-tenure-div")||$(a).parents().is(".search-select-tenure-list")||($(".show-more-tenure-div").hide(),$(".search-more-tenure-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-constructed-div")||$(a).parents().is(".search-more-constructed-div")||$(a).parents().is(".show-more-constructed-div")||($(".show-more-constructed-div").hide(),$(".search-more-constructed-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-psf-div")||$(a).parents().is(".search-more-psf-div")||$(a).parents().is(".show-more-psf-div")||($(".show-more-psf-div").hide(),$(".search-more-psf-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-furnishing-div")||$(a).parents().is(".search-more-furnishing-div")||$(a).parents().is(".search-select-furnish-list")||($(".show-more-furnishing-div").hide(),$(".search-more-furnishing-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-floor-level-div")||$(a).parents().is(".search-more-floor-level-div")||$(a).parents().is(".search-select-floor-level-list")||($(".show-more-floor-level-div").hide(),$(".search-more-floor-level-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-listed-div")||$(a).parents().is(".search-more-listed-div")||$(a).parents().is(".search-select-date-posted-list")||($(".show-more-listed-div").hide(),$(".search-more-listed-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-condition-div")||$(a).parents().is(".search-more-condition-div")||$(a).parents().is(".search-select-condition-list")||($(".show-more-condition-div").hide(),$(".search-more-condition-div").find(".glyphicon-chevron-up").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")),$(a).is(".search-more-hdb-blocks-div")||$(a).parents().is(".search-more-hdb-blocks-div")||$(a).parents().is(".show-more-hdb-blocks-div")||$(".show-more-hdb-blocks-div").hide(),$(a).is(".search-more-land-size-div")||$(a).parents().is(".search-more-land-size-div")||$(a).parents().is(".show-more-land-size-div")||$(".show-more-land-size-div").hide()}),$(document).on("click",".searchTextRecentLinks a",function(){var e=$(this).find(".searchTextRecentLinksName").text();"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","SRX Locate Search","Search Location",e])}),$("#map-search-btn , #commercial-map-search-btn").click(function(e){if(e.preventDefault(),$(".tt-suggestion").children().length>0)$(".tt-suggestion:first-child",this).trigger("click");else{var a=[],t="/maps?fromHome=1";"commercial-map-search-btn"==$(this).attr("id")?Ee(a):Ue(a);for(var l=0;l<a.length;++l)t+="&"+a[l];window.location=t}});var Ee=function(e){$("#commercialTypeSelect").val();e.push("isSale="+("S"==$("#commercialTypeSelect").val())),e.push("cdResearchTypes=82");var a=$(".commercialSubtypeSelect:visible").val();""==a&&$(".commercialSubtypeSelect option").each(function(e){e>1&&(a+=","),a+=$(this).val()}),void 0!=a?e.push("cdResearchSubtypes="+a):e.push("cdResearchSubtypes=12,11,15,14,21,20,13");""!=$("#commercialLocationSelect").val()&&void 0!=$("#commercialLocationSelect").val()&&e.push("districtIds="+$("#commercialLocationSelect").val()),""!=$("#commercialTenureSelect").val()&&void 0!=$("#commercialTenureSelect").val()&&e.push("tenure="+$("#commercialTenureSelect").val());if(""!=$("#commercialSearchTabPane .sale-select-price-min").val()){var t=r($("#commercialSearchTabPane .sale-select-price-min").val());m(t=t.replace(/\D/g,""))&&e.push("minPrice="+t)}if(""!=$("#commercialSearchTabPane .sale-select-price-max").val()){var l=r($("#commercialSearchTabPane .sale-select-price-max").val());m(l=l.replace(/\D/g,""))&&e.push("maxPrice="+l)}if(""!=$("#bedroomSelectCommercial").val()&&(e.push("maxBedrooms="+$("#bedroomSelectCommercial").val()),e.push("minBedrooms="+$("#bedroomSelectCommercial").val())),""!=$("#sizeSelectCommercialMin").val()){m(n=(n=r($("#sizeSelectCommercialMin").val())).replace(/\D/g,""))&&e.push("minBuiltArea="+n)}if(""!=$("#sizeSelectCommercialMax").val()){var n=r($("#sizeSelectCommercialMax").val());m(n=n.replace(/\D/g,""))&&e.push("maxBuiltArea="+n)}if(""!=$("#search-select-psf-min-commercial").val()&&e.push("minPsf="+$("#search-select-psf-min-commercial").val()),""!=$("#search-select-psf-max-commercial").val()&&e.push("maxPsf="+$("#search-select-psf-max-commercial").val()),""!=$("#search-select-tenure-commercial").val()&&e.push("tenure="+$("#search-select-tenure-commercial").val()),""!=$("#search-select-floor-level-commercial").val()&&e.push("floor="+$("#search-select-floor-level-commercial").val()),""!=$("#search-select-bathroom-commercial").val()&&e.push("minBathrooms="+$("#search-select-bathroom-commercial").val()),$("#search-select-xlisting-commercial").is(":checked")&&e.push("withXListing=true"),$("#search-select-v360-commercial").is(":checked")&&e.push("withV360=true"),$("#search-select-classifieds-commercial").is(":checked")&&e.push("withClassifieds=true"),""!=$("#search-select-condition-commercial").val()&&e.push("condition="+$("#search-select-condition-commercial").val()),""!=$("#search-select-date-posted-commercial").val()&&e.push("postedDaysAgo="+$("#search-select-date-posted-commercial").val()),""!=$("#search-select-constructed-commercial-min").val()){m(s=(s=r($("#search-select-constructed-commercial-min").val())).replace(/\D/g,""))&&e.push("builtYearMin="+s)}if(""!=$("#search-select-constructed-commercial-max").val()){var s=r($("#search-select-constructed-commercial-max").val());m(s=s.replace(/\D/g,""))&&e.push("builtYearMax="+s)}if(0==w||b){var i=$.trim($("#commercialSearchTypeahead").val());""!=i&&""!=(i=$.trim($("#commercialSearchTypeahead").val()))&&$(".typeahead-container-data").length&&$(".typeahead-container-data").first().hasClass("typeahead-container-data-extended")&&(i=$(".typeahead-container-data").first().html()),e.push("searchText="+i)}else Ne(e)};$(window).resize(function(){}),$(".landmarkSection label").click(function(e){var a="";1==w?a="#landmarkDistrict ":5==w?a="#landmarkTown ":2==w?a="#landmarkMrt ":3==w?a="#landmarkSchool ":4==w&&(a="#landmarkLifestyle "),$(this).find("input[type=checkbox]").is(":checked")&&$("#advancedSearchLandmarkApply").text("Apply").addClass("landmarkApplySubmit");0==$(a+"input[type=checkbox]:checked").length&&$("#advancedSearchLandmarkApply").text("Close").removeClass("landmarkApplySubmit"),a=a.trim(),$(".landmarkSection label input[type=checkbox]").each(function(){$(this).parents().is(a)||$(this).prop("checked",!1)}),e.stopImmediatePropagation()});var Ne=function(e){if(1==w){var a="";0!=v&&(a=""+v);a.length>0&&(amenitiesText=a,e.push("districtIds="+a),e.push("searchMode=District"))}else if(5==w){var t="";0!=f&&(t=""+f),t.length>0&&(amenitiesText=t,e.push("hdbTownIds="+t),e.push("searchMode=HDBTown"))}else{var l,r="";2==w?(l=$(".landmarkMrtSectionContent input[name=landmarkMrtValue]:checked"),e.push("amenityType=MRT")):3==w?(l=$(".landmarkSchoolsContainer input[name=landmarkSchoolValue]:checked"),e.push("amenityType=SCHOOL")):4==w&&(l=$(".landmarkLifestylesContainer input[name=landmarkLifestyleValue]:checked"),e.push("amenityType=LIFESTYLE")),$.each(l,function(e){r+=$(this).val(),e<l.length-1&&(r+=",")}),r.length>0&&(amenitiesText=r,e.push("amenityIds="+r),e.push("distance=1"))}},Ue=function(e){e.push("isSale="+("S"==S));if(0!=w&&b)Ne(e);else{var a=$.trim($("#searchTextbox").val());$(".typeahead-container-data").length&&$(".typeahead-container-data").first().hasClass("typeahead-container-data-extended")&&(a=$(".typeahead-container-data").first().html()),e.push("searchText="+a)}var t=$('input[name="advancedPropertyTypeInput"]:checked').val();void 0!=(t="N"==t?86:t)?e.push("cdResearchTypes="+t):P?e.push("cdResearchTypes=83"):e.push("cdResearchTypes=86");var l="";$('input[name="advancedPropertySubtypeInput"]:checked').each(function(e){0!=e&&(l+=","),l+=$(this).val()});var n="";if($('input[name="propertyTypeModelDropdown"]:not(:checked)').each(function(e){0!=e&&(n+=","),n+=$(this).val()}),""==n&&$("input[data-propertytype='"+t+"'][name='propertyTypeModelDropdown']").each(function(e){$(this).is(":checked")||(n+=$(this).val()+",")}),e.push("exceptModel="+n),""==l&&$("input[data-propertytype='"+t+"'][name='advancedPropertySubtypeInput']").each(function(e){0!=e&&(l+=","),l+=$(this).val()}),""==n&&e.push("cdResearchSubtypes="+l),""!=$("#mainSearchTabPane .sale-select-price-min").val()){var s=r($("#mainSearchTabPane .sale-select-price-min").val());void 0!==s&&(s=s.replace(/\D/g,"")),m(s)&&e.push("minPrice="+s)}if(""!=$("#mainSearchTabPane .sale-select-price-max").val()){var i=r($("#mainSearchTabPane .sale-select-price-max").val());void 0!==i&&(i=i.replace(/\D/g,"")),m(i)&&e.push("maxPrice="+i)}if(""!=$("#search-select-bathroom").val()){var c=$("#search-select-bathroom").val();void 0!==c&&e.push("minBathrooms="+c)}if(""!=$("#bedroomSelect").val()){var o=$("#bedroomSelect").val(),d=$("#bedroomSelect").val();void 0!==o&&e.push("maxBedrooms="+o),void 0!==d&&e.push("minBedrooms="+d)}if("R"==S&&($("#search-select-roomRental").is(":checked")?e.push("rentalType=RoomRental"):e.push("rentalType=WholeUnit")),""!=$("#sizeSelectMin").val()){var h=$("#sizeSelectMin").val();if(void 0!==h)p=r(h);void 0!==p&&(p=p.replace(/\D/g,"")),m(p)&&e.push("minBuiltArea="+p)}if(""!=$("#sizeSelectMax").val()){var p;void 0!==(p=r($("#sizeSelectMax").val()))&&(p=p.replace(/\D/g,"")),m(p)&&e.push("maxBuiltArea="+p)}if(""!=$("#search-select-psf-min").val()){void 0!==(u=r($("#search-select-psf-min").val()))&&(u=u.replace(/\D/g,"")),m(u)&&e.push("minPsf="+u)}if(""!=$("#search-select-psf-max").val()){var u=r($("#search-select-psf-max").val());void 0!==u&&(u=u.replace(/\D/g,"")),m(u)&&e.push("maxPsf="+u)}if(""!=$("#search-select-tenure").val()){var v=$("#search-select-tenure").val();void 0!==v&&e.push("tenure="+v)}if(""!=$("#search-select-furnish").val()){f="";"NOT"==$("#search-select-furnish").val()?f="1":"HALF"==$("#search-select-furnish").val()?f="2":"FULL"==$("#search-select-furnish").val()&&(f="3"),e.push("furnish="+f)}if(""!=$("#search-select-floor-level").val()){var f="";"GROUND"==$("#search-select-floor-level").val()?f="1":"LOW"==$("#search-select-floor-level").val()?f="2":"MID"==$("#search-select-floor-level").val()?f="3":"HIGH"==$("#search-select-floor-level").val()?f="4":"PENTHOUSE"==$("#search-select-floor-level").val()&&(f="5"),e.push("floor="+f)}if($("#search-select-xlisting").is(":checked")&&e.push("withXListing=true"),$("#search-select-v360").is(":checked")&&e.push("withV360=true"),$("#search-select-drone").is(":checked")&&e.push("droneViewFilter=true"),$("#search-select-classifieds").is(":checked")&&e.push("withClassifieds=true"),""!=$("#search-select-date-posted").val()){var y=$("#search-select-date-posted").val();void 0!==y&&e.push("postedDaysAgo="+y)}if(""!=$("#landSizeSelectMin").val()&&85==t){m(g=(g=r($("#landSizeSelectMin").val())).replace(/\D/g,""))&&e.push("minLandArea="+g)}if(""!=$("#landSizeSelectMax").val()&&85==t){var g=r($("#landSizeSelectMax").val());m(g=g.replace(/\D/g,""))&&e.push("maxLandArea="+g)}};$("#mainSearchTabPane > form").submit(function(e){if(e.preventDefault(),$(".tt-suggestion").children().length>0)$(".tt-suggestion:first-child",this).trigger("click");else{var a="",t=$.trim($("#searchTextbox").val());$(".typeahead-container-data").length&&(t=$(".typeahead-container-data").first().html());var l=$('input[name="advancedPropertyTypeInput"]:checked').val(),r="searchProjects2";if("N"==l&&(r="newProject",l=86),t.match("^[0-9]{4}$"))a="/srx/loadListingFromPcCode/redefinedSearch.srx?pcCode="+t;else if("sla"==t||~t.indexOf("black")&&~t.indexOf("white"))a="/sla-rentals";else{if("searchProjects2"==r)return me();a="/srx/index.jsp?link="+r+"&type="+S+"&propertyType="+l+"&keywords="+t+"&postal=&radius=0.25&pageIndex=0&sortBy=distance"}window.location=a}}),$("#listings-save-search").click(function(e){var a=He(1);$("#userLoggedIn").length&&"true"==$("#userLoggedIn").val()?je($(this),a):(setCookie("save_dreamlist",JSON.stringify(a)),window.location.href="/dreamlist")});var He=function(e){var a=e||null,t=$(".saleRentTypeSelect").val(),l={title:"[ Saved Search ]",type:t,receiveEmailAlerts:a},r=$('input[name="advancedPropertyTypeInput"]:checked').val();if("83"!=r){var n="";$('input[name="advancedPropertySubtypeInput"]:checked').each(function(e){0!=e&&(n+=","),n+=$(this).val()}),l.cdResearchSubtypesList=n}var s=null;"R"==$('input[name="advancedSearchType2"]:checked').val()&&$("#search-filter-sale-rent-unit").hasClass("active")&&(s="RR"==$("#roomTypeSelect2").val()?1:2,l.roomType=s);var i="";$(".propertyTypeModelInput").each(function(){i+=this.checked?$(this).val()+",":""}),""!=i&&(i=i.slice(0,-1),l.models=i);var c=null;$("#searchTextbox").val()&&$("#searchTextbox").val().length>0&&(c=$("#searchTextbox").val()),c&&(l.searchText=c);var o=null,d=null,h=null,p=$("#overlapping-stations").val(),u=($("#edit-amentiy-list").val(),1);if(0!=(w=0))if(l.searchText=null,1==w){o="";var v=$(".landmarkDistrictSectionContent2 input[name=landmarkDistrictValue2]:checked");$.each(v,function(e){o+=$(this).val(),e<v.length-1&&(o+=",")}),null!=o&&o.length>0&&(l.districtIdsList=o)}else if(5==w){d="";var f=$(".landmarkTownSection2 input[name=landmarkTownValue2]:checked");$.each(f,function(e){d+=$(this).val(),e<f.length-1&&(d+=",")}),null!=d&&d.length>0&&(l.hdbTownIdsList=d)}else{var y;if(h="",2==w?(y=$(".landmarkMrtSectionContent2 input[name=landmarkMrtValue2]:checked"),u=$("#landmarkMrtDistanceSelect2 option:selected").val()):3==w?(y=$(".landmarkSchoolsContainer2 input[name=landmarkSchoolValue2]:checked"),u=$("#landmarkSchoolDistanceSelect2 option:selected").val()):4==w&&(y=$(".landmarkLifestylesContainer2 input[name=landmarkLifestyleValue2]:checked"),u=$("#landmarkLifestyleDistanceSelect2 option:selected").val()),$.each(y,function(e){h+=$(this).val(),e<y.length-1&&(h+=",")}),2==w&&""!=p){I=h.slice();h="",$.each(y,function(e){h+=$(this).val(),e<y.length-1&&(h+=",")})}null!=h&&h.length>0&&(l.amenityIds=h),null!=u&&u.length>0&&(l.radius=u)}var g=null,k=null;if("S"==t?(g=$(".sale-select-price-min").val(),k=$(".sale-select-price-max").val()):(g=$(".rent-select-price-min").val(),k=$(".rent-select-price-max").val()),null!=g&&null!=k&&m(g)&&m(k)&&parseInt(g)>parseInt(k)){I=k;k=g,g=I}g&&m(g)&&(l.askingMin=g),k&&m(k)&&(l.askingMax=k);var x=$("#search-select-constructed-min").val()&&$("#search-select-constructed-min").val().length>0?$("#search-select-constructed-min").val():null,S=$("#search-select-constructed-max").val()&&$("#search-select-constructed-max").val().length>0?$("#search-select-constructed-max").val():null;if(null!=x&&null!=S&&parseInt(x)>parseInt(S)){I=S;S=x,x=I}x&&(l.minBuiltYear=x),S&&(l.maxBuiltYear=S);var T=$("#sizeSelectMin").val()&&$("#sizeSelectMin").val().length>0?$("#sizeSelectMin").val():null,b=$("#sizeSelectMax").val()&&$("#sizeSelectMax").val().length>0?$("#sizeSelectMax").val():null;if(null!=T&&null!=b&&parseInt(T)>parseInt(b)){I=b;b=T,T=I}T&&(l.minBuiltSize=T),b&&(l.maxBuiltSize=b);var C=null,P=null;if("85"==r&&(C=$("#landSizeSelectMin").val(),P=$("#landSizeSelectMax").val(),null!=C&&null!=P&&parseInt(C)>parseInt(P))){I=P;P=C,C=I}C&&(l.minLandSize=C),P&&(l.maxLandSize=P);var M=isNaN(parseFloat($("#search-select-psf-min").val()))?null:$("#search-select-psf-min").val(),V=isNaN(parseFloat($("#search-select-psf-max").val()))?null:$("#search-select-psf-max").val();if(null!=M&&null!=V&&parseFloat(M)>parseFloat(V)){I=V;V=M,M=I}M&&(l.minPsf=M),V&&(l.maxPsf=V);var L=$("#bedroomSelect").length>0?$("#bedroomSelect").val():null,D=$("#bedroomSelect").length>0?$("#bedroomSelect").val():null;if(null!=L&&null!=D&&parseInt(L)>parseInt(D)){var I=D;D=L,L=I}L&&(l.bedroomsMin=L),D&&(l.bedroomMax=D);var A=null;$("#search-select-tenure").val()&&$("#search-select-tenure").val().length>0&&0!=$("#search-select-tenure").val()&&(A=$("#search-select-tenure").val(),l.tenureIdsList=A);var B=$("#search-select-hdb-block-from").val()&&$("#search-select-hdb-block-from").val().length>0?$("#search-select-hdb-block-from").val():null,R=$("#search-select-hdb-block-to").val()&&$("#search-select-hdb-block-to").val().length>0?$("#search-select-hdb-block-to").val():null;B&&(l.hdbBlockFrom=B),R&&(l.hdbBlockTo=R);var z=$("#search-select-v360").is(":checked")?1:null,W=$("#search-select-classifieds").is(":checked")?1:null;return z&&(l.hasV360=z),W&&(l.hasClassified=W),l},je=function(e,a){$.ajax({type:"POST",url:"/dreamlist/save",data:a,isAlert:"1",success:function(e){e.error||(window.location.href="/dreamlist")},error:function(e){alert(e)},datatype:"json"})},Xe=function(e){Custombox.open({target:e,effect:"scale",overlayOpacity:.7,speed:100})};$("#landmarkMrtMap").length;var qe,Ye,_e,Ge,Je,Ke,Qe=function(){void 0==qe&&(Ye=document.getElementById("landmarkMrtMap"),qe=new google.maps.Map(Ye,{center:new google.maps.LatLng(1.3480752,103.8400135),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP,navigationControl:!0,navigationControlOptions:{style:google.maps.NavigationControlStyle.DEFAULT}}))},Ze=function(){void 0==Ge&&(_e=document.getElementById("landmarkSchoolMap"),Ge=new google.maps.Map(_e,{center:new google.maps.LatLng(1.3480752,103.8400135),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP,navigationControl:!0,navigationControlOptions:{style:google.maps.NavigationControlStyle.DEFAULT}}))},ea=function(){void 0==Ke&&(Je=document.getElementById("landmarkLifestyleMap"),Ke=new google.maps.Map(Je,{center:new google.maps.LatLng(1.3480752,103.8400135),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP,navigationControl:!0,navigationControlOptions:{style:google.maps.NavigationControlStyle.DEFAULT}}))}});